-- ----------------------------------------------------------
-- miracle Document database initialisation script.
-- ----------------------------------------------------------

--  Create Folder table
CREATE TABLE DOCU_FOLDER (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    DESCRIPTION VARCHAR(256) NULL,
    GROUP_ID INT NULL,
    TYPE VARCHAR(64) NOT NULL,
    PRIVATE BIT NOT NULL,
    PARENT_ID INT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT DOCU_FOLDER_PK PRIMARY KEY(ID)
);

CREATE UNIQUE INDEX DOCU_FOLDER_IDX ON DOCU_FOLDER (
    ORGANISATION_ID, NAME
);

--  Create File table
CREATE TABLE DOCU_FILE (
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    CAPTION VARCHAR(256) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    ENCODING VARCHAR(32) NOT NULL,
    FILE_NAME VARCHAR(256) NOT NULL,
    FOLDER_ID INT NULL,
    LAST_MODIFIED_DATE DATETIME NULL,
    SIZE NUMERIC(18,6) NULL,
    TYPE VARCHAR(32) NOT NULL,
    URL VARCHAR(256) NOT NULL,

     --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT DOCU_FILE_PK PRIMARY KEY(ID),
    CONSTRAINT DOCU_FILE_FOLDER_FK FOREIGN KEY(FOLDER_ID) REFERENCES DOCU_FOLDER(ID)
);

CREATE INDEX DOCU_FILE_IDX ON DOCU_FILE (
    ORGANISATION_ID, CAPTION
);

CREATE TABLE DOC_OTHER_CSV_ENTITY_MAP(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,

    CSV_FILE_NAME VARCHAR(128) NOT NULL,
    ENTITY_TYPE VARCHAR(64) NOT NULL,
    MEMO VARCHAR(256) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT DOC_OTHER_CSV_ENTITY_MAP_PK PRIMARY KEY (ID)
);

CREATE INDEX DOC_OTHER_CSV_ENTITY_MAP_IDX ON DOC_OTHER_CSV_ENTITY_MAP(
    ORGANISATION_ID, ENTITY_TYPE
);


CREATE TABLE DOC_OTHER_CSV_ENTITY_FIELD_MAP(
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    NAME VARCHAR(64) NULL,

    CSV_ENTITY_MAP_ID INT NULL,
    ENTITY_TYPE VARCHAR(64) NULL,
    CSV_COLUMN_NAME VARCHAR(64) NULL,
    DEFAULT_DATA VARCHAR(128) NULL,
    ENTITY_RECORD_FIELD_ID INT NULL,
    MAPPING_FROM_COLUMN BIT NULL,
    MEMO VARCHAR(256) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT DOC_OTHER_CSV_ENTITY_FIELD_MAP_PK PRIMARY KEY (ID),
    CONSTRAINT DOC_OTHER_CSV_ENTITY_FIELD_MAP_ENTITY_MAP_FK FOREIGN KEY (CSV_ENTITY_MAP_ID) REFERENCES DOC_OTHER_CSV_ENTITY_MAP (ID)
);

CREATE INDEX DOC_OTHER_CSV_ENTITY_FIELD_MAP_IDX ON DOC_OTHER_CSV_ENTITY_FIELD_MAP(
    CSV_ENTITY_MAP_ID
);

CREATE TABLE DOC_OTHER_CSV_IMPORTED_RECORD(
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,

    CSV_FILE_NAME VARCHAR(128) NOT NULL,
    CSV_ENTITY_MAP_ID INT NULL,
    ENTITY_TYPE VARCHAR(64) NOT NULL,
    DETAIL VARCHAR(1024) NULL,

   --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT DOC_OTHER_CSV_IMPORTED_RECORD_PK PRIMARY KEY (ID),
    CONSTRAINT DOC_OTHER_CSV_IMPORTED_RECORD_ENTITY_MAP_FK FOREIGN KEY (CSV_ENTITY_MAP_ID) REFERENCES DOC_OTHER_CSV_ENTITY_MAP (ID)
);

CREATE INDEX DOC_OTHER_CSV_IMPORTED_RECORD_IDX ON DOC_OTHER_CSV_IMPORTED_RECORD(
    ORGANISATION_ID, ENTITY_TYPE
);

--  ----------------------------------------------------------
-- miracle Platform Common database initialisation script.
-- -----------------------------------------------------------

--  Create Address table
CREATE TABLE COMM_ADDRESS (
    ID INT IDENTITY(1,1) NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    ADDRESS VARCHAR(256) NULL,
    ADDRESSEE VARCHAR(256) NULL,
    ADDRESS_LINE1 VARCHAR(256) NULL,
    ADDRESS_LINE2 VARCHAR(256) NULL,
    ADDRESS_LINE3 VARCHAR(256) NULL,
    ADDRESS_PHONE VARCHAR(64) NULL,
    ATTENTION VARCHAR(256) NULL,
    BILLING_ADDRESS BIT NULL,
    CITY VARCHAR(64) NULL,
    COUNTRY VARCHAR(64) NULL,
    DEFAULT_ADDRESS BIT NULL,
    POSTCODE VARCHAR(32) NULL,
    RESIDENTIAL_ADDRESS BIT NULL,
    SHIPPING_ADDRESS BIT NULL,
    STATE VARCHAR(64) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT COMM_ADDRESS_PK PRIMARY KEY(ID)
);

CREATE INDEX COMM_ADDRESS_IDX ON COMM_ADDRESS (
    ORGANISATION_ID, CITY, STATE, POSTCODE, COUNTRY
);

--  Create Organisation table
CREATE TABLE COMM_ORGANISATION (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,

    ADDRESS_ID INT NULL,
    BUSSINESS_CERTIFICATE_ID INT NULL,
    CONTACT_PERSON VARCHAR(128) NULL,
    CONTACT_PERSON_ID INT NULL,
    CONTACT_PHONE VARCHAR(64) NULL,
    CONTACT_MOBILE VARCHAR(64) NULL,
    CONTACT_EMAIL VARCHAR(128) NULL,
    DATA_NODE_ID INT NULL,
    DESCRIPTION VARCHAR(128) NULL,
    MAIL_ADDRESS_ID INT NULL,
    LOGO_ID INT NULL,
    REGISTER_ADDRESS_ID INT NULL,
    REPRESENTATIVE VARCHAR(128) NULL,
    REPRESENTATIVE_ID INT NULL,
    SHORT_NAME VARCHAR(32) NULL,
    STATUS VARCHAR(16) NULL,
    TYPE VARCHAR(16) NULL,
    WEB_SITE VARCHAR(256) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT COMM_ORGANISATION_PK PRIMARY KEY(ID),
    CONSTRAINT COMM_ORGANISATION_LOGO_FK FOREIGN KEY(LOGO_ID) REFERENCES DOCU_FILE(ID),
    CONSTRAINT COMM_ORGANISATION_BUSSINESS_CERTIFICATE_FK FOREIGN KEY(BUSSINESS_CERTIFICATE_ID) REFERENCES DOCU_FILE(ID),
    CONSTRAINT COMM_ORGANISATION_REGISTER_ADDRESS_FK FOREIGN KEY(REGISTER_ADDRESS_ID) REFERENCES COMM_ADDRESS(ID),
    CONSTRAINT COMM_ORGANISATION_ADDRESS_FK FOREIGN KEY(ADDRESS_ID) REFERENCES COMM_ADDRESS(ID),
    CONSTRAINT COMM_ORGANISATION_MAIL_ADDRESS_FK FOREIGN KEY(MAIL_ADDRESS_ID) REFERENCES COMM_ADDRESS(ID)
);

CREATE UNIQUE INDEX COMM_ORGANISATION_IDX ON COMM_ORGANISATION (
    NAME
);
-- ----------------------------------------------------------
-- miracle Basic Accounting/classification database initialisation script.
-- ----------------------------------------------------------
--  Create Group table
CREATE TABLE ACNT_GROUP (
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(128) NOT NULL,
    CODE VARCHAR(128) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    HAS_CHILDREN BIT NULL,
    PARENT_ID INT NULL,
    TYPE VARCHAR(64) NULL,

    --Location
    ADDRESS VARCHAR(256) NULL,
    ADDRESSEE VARCHAR(256) NULL,
    ADDRESS1 VARCHAR(256) NULL,
    ADDRESS2 VARCHAR(256) NULL,
    ADDRESS3 VARCHAR(256) NULL,
    ADDRESS_PHONE VARCHAR(64) NULL,
    ATTENTION VARCHAR(256) NULL,
    CITY VARCHAR(64) NULL,
    COUNTRY VARCHAR(64) NULL,
    INVENTORY_AVAILABLE BIT NULL,
    POSTCODE VARCHAR(32) NULL,
    RETURN_ADDRESS1 VARCHAR(256) NULL,
    RETURN_ADDRESS2 VARCHAR(256) NULL,
    RETURN_ADDRESSEE VARCHAR(256) NULL,
    RETURN_CITY VARCHAR(64) NULL,
    RETURN_STATE VARCHAR(64) NULL,
    RETURN_POSTCODE VARCHAR(32) NULL,
    RETURN_COUNTRY VARCHAR(64) NULL,
    STATE VARCHAR(64) NULL,
    TRANSACTION_PREFIX VARCHAR(64) NULL,

    --CostCategory
    ACCOUNT_ID INT NULL,
    COST_TYPE VARCHAR(32) NULL,

    --SiteCategory
    DESCRIPTION VARCHAR(1024) NULL,
    EXCLUDE_FROM_SITE_MAP BIT NULL,
    ON_LINE BIT NULL,
    PAGE_TITLE VARCHAR(64) NULL,
    SEARCH_KEY_WORDS VARCHAR(128) NULL,
    SITE_MAP_PRIORITY VARCHAR(32) NULL,
    STORE_DETAILED_DESCRIPTION VARCHAR(1024) NULL,
    STORE_DISPLAY_IMAGE_ID INT NULL,
    STORE_DISPLAY_THUMBNAIL_ID INT NULL,
    URL VARCHAR(128) NULL,

    --BusinessConfigCategory
    BUSINESS_CONFIG_TYPE VARCHAR(128) NULL,

    --ExpenseCategory
    DEFAULT_RATE NUMERIC(18,6) NULL,
    RATE_REQUIRED BIT NULL,

    --VendorCategory
    PREFERRED BIT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT ACNT_GROUP_PK PRIMARY KEY(ID),
    CONSTRAINT ACNT_GROUP_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_GROUP_DEPARTMENT_FK FOREIGN KEY(DEPARTMENT_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT ACNT_GROUP_LOCATION_FK FOREIGN KEY(LOCATION_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT ACNT_GROUP_CLASSIFICATION_FK FOREIGN KEY(CLASSIFICATION_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT ACNT_GROUP_PARENT_FK FOREIGN KEY(PARENT_ID) REFERENCES ACNT_GROUP(ID)
);

CREATE INDEX ACNT_GROUP_IDX ON ACNT_GROUP (
    ORGANISATION_ID
);
-- ----------------------------------------------------------
-- miracle Basic Relation database initialisation script.
-- ----------------------------------------------------------

--  Create Relation table
CREATE TABLE RLAT_RELATION (
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Organisation Foreign Mapping Key
    ORGANISATION_REFERENCE_ID INT NULL,

    --Employee properties
    ACCESSIBLE BIT NULL,
    ACCOUNT VARCHAR(64) NULL,
    BIRTHDAY DATE NULL,
    EMAIL VARCHAR(128) NULL,
    EXPENSE_APPROVAL_LIMIT NUMERIC(18,6) NULL,
    EMPLOYEE_TYPE VARCHAR(16) NULL,
    FAILED_LOGIN_ATTEMPTS INT NULL,
    FIRST_NAME VARCHAR(128) NULL,
    GENDER VARCHAR(16) NULL,
    HOME_PHONE VARCHAR(128) NULL,
    LAST_LOGIN DATETIME NULL,
    LAST_NAME VARCHAR(128) NULL,
    LEAVE_DATE DATETIME NULL,
    MIDDLE_NAME VARCHAR(128) NULL,
    MOBILE_PHONE VARCHAR(128) NULL,
    NEXT_REVIEW_DATE DATETIME NULL,
    PASSWORD VARCHAR(128) NULL,
    PHONE VARCHAR(128) NULL,
    REQUIRE_PWD_CHANGE BIT NULL,
    START_DATE DATETIME NULL,
    SUPERVISOR_ID INT NULL,
    TITLE VARCHAR(32) NULL,
    TYPE VARCHAR(16) NULL,
    WORK_PHONE VARCHAR(128) NULL,
    LOAN_OFFICER VARCHAR(32)NULL,
    CONFIG_TYPE VARCHAR(16) NULL,
    --Competitor properties
    DESCRIPTION VARCHAR(256) NULL,
    PRODUCT_SERVICES VARCHAR(128) NULL,
    STRATEGY VARCHAR(256) NULL,
    STRENGTHS VARCHAR(128) NULL,
    URL VARCHAR(256) NULL,
    WEAKNESSES VARCHAR(128) NULL,

    --Customer/Vendor Category
    PREFERRED BIT NULL,

    --Customer properties
    PROBABILITY NUMERIC(18,6) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT RLAT_RELATION_PK PRIMARY KEY(ID),
    CONSTRAINT RLAT_RELATION_ORGANISATION_FK FOREIGN KEY (ORGANISATION_ID) REFERENCES COMM_ORGANISATION (ID),
    CONSTRAINT RLAT_RELATION_ORGANISATION_REFERENCE_FK FOREIGN KEY (ORGANISATION_REFERENCE_ID) REFERENCES COMM_ORGANISATION (ID),
    CONSTRAINT RLAT_RELATION_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT RLAT_RELATION_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT RLAT_RELATION_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT RLAT_RELATION_SUPERVISOR_FK FOREIGN KEY (SUPERVISOR_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT RLAT_RELATION_OWNER_FK FOREIGN KEY (OWNER_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT RLAT_RELATION_RELATION_UQ UNIQUE(EMAIL)
);

CREATE INDEX RLAT_RELATION_IDX ON RLAT_RELATION(
    ORGANISATION_ID, DEPARTMENT_ID, EMPLOYEE_TYPE
);

CREATE TABLE RLAT_OTHER_CREDIT_CARD (
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    APPROVED BIT NULL,
    CARD_STREET VARCHAR(32) NULL,
    CARD_POSTCODE VARCHAR(32) NULL,
    CARD_CONTACT VARCHAR(64) NULL,
    CARD_CONTACT_PHONE VARCHAR(32) NULL,
    CARD_CONTACT_EMAIL VARCHAR(64) NULL,
    CONTACT_ADDRESS_ID INT NULL,
    COMPANY VARCHAR(32) NULL,
    COMPANY_ID INT NULL,
    CONTACT_ID INT NULL,
    CURRENCY_ID INT NULL,
    CURRENCY_NAME VARCHAR(32) NULL,
    CUSTOMER_ID INT NULL,
    EXPIRY_DATE DATETIME NULL,
    ISSUED_FROM VARCHAR(64) NULL,
    ISSUED_COUNTRY VARCHAR(32) NULL,
    NAME VARCHAR(64) NULL,
    NUMBER VARCHAR(32) NULL,
    OWNER_TYPE VARCHAR(32) NULL,
    SECURITY_CODE VARCHAR(32) NULL,
    STAFF_ID INT NULL,
    TYPE VARCHAR(32) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT RLAT_OTHER_CREDIT_CARD_PK PRIMARY KEY (ID),
    CONSTRAINT RLAT_OTHER_CREDIT_CARD_ORGANISATION_FK FOREIGN KEY (ORGANISATION_ID) REFERENCES COMM_ORGANISATION (ID),
    CONSTRAINT RLAT_OTHER_CREDIT_CARD_CONTACT_ADDRESS_FK FOREIGN KEY (CONTACT_ADDRESS_ID) REFERENCES COMM_ADDRESS (ID),
    CONSTRAINT RLAT_OTHER_CREDIT_CARD_COMPANY_FK FOREIGN KEY (COMPANY_ID) REFERENCES COMM_ORGANISATION (ID),
    CONSTRAINT RLAT_OTHER_CREDIT_CARD_CONTACT_FK FOREIGN KEY (CONTACT_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT RLAT_OTHER_CREDIT_CARD_CUSTOMER_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT RLAT_OTHER_CREDIT_CARD_STAFF_FK FOREIGN KEY (STAFF_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT RLAT_OTHER_CREDIT_CARD_OWNER_FK FOREIGN KEY (OWNER_ID) REFERENCES RLAT_RELATION (ID)
);

--  ----------------------------------------------------------
-- miracle Basic Accounting Other database initialisation script.
-- -----------------------------------------------------------

--  Create Fiscal Calendar table
CREATE TABLE ACNT_OTHER_FISCAL_CALENDAR (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,

    DEFAULT_CALENDER BIT NOT NULL,
    FIRST_MONTH VARCHAR(16) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT ACNT_OTHER_FISCAL_CALENDAR_PK PRIMARY KEY(ID),
    CONSTRAINT ACNT_OTHER_FISCAL_CALENDAR_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_FISCAL_CALENDAR_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_FISCAL_CALENDAR_IDX ON ACNT_OTHER_FISCAL_CALENDAR (
    ORGANISATION_ID, NAME
);

--Create table UnitType
CREATE TABLE ACNT_UNIT_TYPE(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(128) NULL,
    CODE VARCHAR(128) NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    MEASUREMENT_UNIT_ID INT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT ACNT_UNIT_TYPE_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_UNIT_TYPE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_UNIT_TYPE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)

);

-- Create MeasurementUnit table
CREATE TABLE ACNT_OTHER_MEASUREMENT_UNIT(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    ABBREVIATION VARCHAR(32) NULL,
    BASE_UNIT BIT NULL,
    CONVERSION_RATE NUMERIC(18,6) NULL,
    DESCRIPTION VARCHAR(64) NULL,
    MEASUREMENT_UNIT_TYPE VARCHAR(64) NULL,
    PLURAL_ABBREVIATION VARCHAR(32) NULL,
    PLURAL_NAME VARCHAR(32) NULL,

   --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_OTHER_MEASUREMENT_UNIT_PK PRIMARY KEY(ID),
    CONSTRAINT ACNT_OTHER_MEASUREMENT_UNIT_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_MEASUREMENT_UNIT_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_MEASUREMENT_UNIT_IDX ON ACNT_OTHER_MEASUREMENT_UNIT (
    ORGANISATION_ID
);

--  ----------------------------------------------------------
-- miracle Basic Accounting database initialisation script.
-- -----------------------------------------------------------

--  Create Account table
CREATE TABLE ACNT_ACCOUNT (
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable
    ACCOUNT_NUMBER VARCHAR(128) NULL,
    CASH_FLOW_RATE_TYPE VARCHAR(32) NULL,
    CURRENCY_ID INT NULL,
    TYPE VARCHAR(32) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT ACNT_ACCOUNT_PK PRIMARY KEY(ID),
    CONSTRAINT ACNT_ACCOUNT_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_ACCOUNT_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_ACCOUNT_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_ACCOUNT_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_ACCOUNT_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_ACCOUNT_IDX ON ACNT_ACCOUNT (
    ORGANISATION_ID
);

CREATE TABLE ACNT_ACCOUNTING_PERIOD(
    --VariableProperties
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,

    ALL_CLOSED BIT NULL,
    ABLE_NON_GL_CHANGE BIT NULL,
    PAYABLE_CLOSED BIT NULL,
    RECEIVABLE_CLOSED BIT NULL,
    END_DATE DATETIME NULL,
    FISCAL_CALENDAR_ID INT NULL,
    IS_ADJUSTMENT BIT NULL,
    IS_QUARTER BIT NULL,
    IS_YEAR BIT NULL,
    PARENT_ID INT NULL,
    PAYROLL_CLOSED BIT NULL,
    START_DATE DATETIME NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT ACNT_ACCOUNTING_PERIOD_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_ACCOUNTING_PERIOD_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_ACCOUNTING_PERIOD_FISCAL_CALENDAR_FK FOREIGN KEY(FISCAL_CALENDAR_ID) REFERENCES ACNT_OTHER_FISCAL_CALENDAR(ID),
    CONSTRAINT ACNT_ACCOUNTING_PERIOD_PARENT_FK FOREIGN KEY(PARENT_ID) REFERENCES ACNT_ACCOUNTING_PERIOD(ID),
    CONSTRAINT ACNT_ACCOUNTING_PERIOD_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_ACCOUNTING_PERIOD_IDX ON ACNT_ACCOUNTING_PERIOD (
    ORGANISATION_ID
);
--  ----------------------------------------------------------
-- miracle Basic Classification database initialisation script.
-- -----------------------------------------------------------

--  Create Currency table
CREATE TABLE ACNT_CURRENCY (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,

    PRECISION VARCHAR(8) NULL,
    DISPLAY_SYMBOL VARCHAR(16) NULL,
    EXCHANGE_RATE NUMERIC(18,6) NULL,
    FOMATE VARCHAR(32) NULL,
    AUTO_UPDATE BIT NULL,
    BASE_CURRENCY BIT NULL,
    LOCALE VARCHAR(64) NULL,
    OVERRIDE_FORMAT BIT NULL,
    SYMBOL VARCHAR(32) NULL,
    SYMBOL_PLACEMENT_METHOD VARCHAR(64) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT ACNT_CURRENCY_PK PRIMARY KEY(ID),
    CONSTRAINT ACNT_CURRENCY_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_CURRENCY_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_CURRENCY_IDX ON ACNT_CURRENCY (
    ORGANISATION_ID
);

--  Create Subsidiary table
CREATE TABLE ACNT_SUBSIDIARY (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    ORGANISATION_ID INT NULL,

    ADDRESS_ID INT NULL,
    ADDRESS1 VARCHAR(256) NULL,
    ADDRESS2 VARCHAR(256) NULL,
    ADDRESS3 VARCHAR(256) NULL,
    ADDRESSEE VARCHAR(256) NULL,
    ADDRESS VARCHAR(256) NULL,
    ADDRESS_PHONE VARCHAR(64) NULL,
    ATTENTION VARCHAR(256) NULL,
    CITY VARCHAR(64) NULL,
    COUNTRY VARCHAR(64) NULL,
    CURRENCY_ID INT NULL,
    EMAIL VARCHAR(128) NULL,
    EMPLOYER_ID_NUMBER VARCHAR(128) NULL,
    FAX VARCHAR(64) NULL,
    FISCAL_CALENDAR_ID INT NULL,
    INTERCO_ACCOUNT_ID INT NULL,
    LANGUAGE VARCHAR(32) NULL,
    LOGO_ID INT NULL,
    PAGE_LOGO_ID INT NULL,
    PARENT_ID INT NULL,
    POSTCODE VARCHAR(32) NULL,
    RETURN_ADDRESS_ID INT NULL,
    SHIPPING_ADDRESS_ID INT NULL,
    STATE VARCHAR(64) NULL,
    TAX_NUMBER VARCHAR(128) NULL,
    TAX_FISCAL_CALENDAR_ID INT NULL,
    WEB_SITE VARCHAR(256) NULL,
    COSTING_METHOD VARCHAR(32) NULL,
    SUBSIDIARY_TYPE VARCHAR(32) NULL,
    MOBILE_PHONE VARCHAR(64) null,
    DATA_SETTING VARCHAR(32) NULL,
    ALL_SUPERVISOR BIT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT ACNT_SUBSIDIARY_PK PRIMARY KEY(ID),
    CONSTRAINT ACNT_SUBSIDIARY_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_SUBSIDIARY_CURRENCY_FK FOREIGN KEY(CURRENCY_ID) REFERENCES ACNT_CURRENCY(ID),
    CONSTRAINT ACNT_SUBSIDIARY_FISCAL_CALENDAR_FK FOREIGN KEY(FISCAL_CALENDAR_ID) REFERENCES ACNT_OTHER_FISCAL_CALENDAR(ID),
    CONSTRAINT ACNT_SUBSIDIARY_INTERCO_ACCOUNT_FK FOREIGN KEY(INTERCO_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_SUBSIDIARY_LOGO_FK FOREIGN KEY(LOGO_ID) REFERENCES DOCU_FILE(ID),
    CONSTRAINT ACNT_SUBSIDIARY_PAGE_LOGO_FK FOREIGN KEY(PAGE_LOGO_ID) REFERENCES DOCU_FILE(ID),
    CONSTRAINT ACNT_SUBSIDIARY_ADDRESS_FK FOREIGN KEY(ADDRESS_ID) REFERENCES COMM_ADDRESS(ID),
    CONSTRAINT ACNT_SUBSIDIARY_RETURN_ADDRESS_FK FOREIGN KEY(RETURN_ADDRESS_ID) REFERENCES COMM_ADDRESS(ID),
    CONSTRAINT ACNT_SUBSIDIARY_SHIPPING_ADDRESS_FK FOREIGN KEY(SHIPPING_ADDRESS_ID) REFERENCES COMM_ADDRESS(ID),
    CONSTRAINT ACNT_SUBSIDIARY_TAX_FISCAL_CALENDAR_FK FOREIGN KEY(TAX_FISCAL_CALENDAR_ID) REFERENCES ACNT_OTHER_FISCAL_CALENDAR(ID),
    CONSTRAINT ACNT_SUBSIDIARY_PARENT_FK FOREIGN KEY(PARENT_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_SUBSIDIARY_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_SUBSIDIARY_IDX ON ACNT_SUBSIDIARY (
    ORGANISATION_ID
);

--Create Table TaxCode
CREATE TABLE ACNT_TAX_CODE(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NULL,
    CODE VARCHAR(32) NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    COUNTRY VARCHAR(32) NULL,
    DESCRIPTION VARCHAR(128) NULL,
    TYPE VARCHAR(32) NULL,
    TAX_RATE NUMERIC(18,6) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT ACNT_TAX_CODE_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_TAX_CODE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_TAX_CODE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_TAX_CODE_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_TAX_CODE_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_TAX_CODE_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_TAX_CODE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_TAX_CODE_IDX ON ACNT_TAX_CODE(
    ORGANISATION_ID, SUBSIDIARY_ID
);

--Create table Status
CREATE TABLE CORE_STATUS(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

     --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    CONFIG_TYPE VARCHAR(32) NULL,
    TYPE VARCHAR(32) NULL,
    DESCRIPTION VARCHAR(64) NULL,
    GROUP_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CORE_STATUS_PK PRIMARY KEY (ID),
    CONSTRAINT CORE_STATUS_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CORE_STATUS_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT CORE_STATUS_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT CORE_STATUS_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT CORE_STATUS_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT CORE_STATUS_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX CORE_STATUS_IDX ON CORE_STATUS(
    ORGANISATION_ID, SUBSIDIARY_ID, NAME
);

--Create table Item
CREATE TABLE ACNT_ITEM(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    TYPE VARCHAR(32) NULL,

    --InventoryItem
    ASSET_ACCOUNT_ID INT NULL,
    AUTO_LEAD_TIME BIT NULL,
    AUTO_PREFERRED_STOCK_LEVEL BIT NULL,
    AVAILABLE_TO_PARTNER BIT NULL,
    AVERAGE_COST NUMERIC(18,6) NULL,
    BACKWARD_CONSUMPTION_DAYS INT NULL,
    BILL_EXCHAGE_VARIANCE_ACCOUNT_ID INT NULL,
    BILLING_SCHEDULE_ID INT NULL,
    BILL_PRICE_VARIANCE_ACCOUNT_ID INT NULL,
    BILL_QUANTITY_VARIANCE_ACCOUNT_ID INT NULL,
    COGS_ACCOUNT_ID INT NULL,
    COST NUMERIC(18,6) NULL,
    COST_UNIT_ID INT NULL,
    COST_CATEGORY_ID INT NULL,
    COST_ESTIMATE NUMERIC(18,6) NULL,
    COST_ESTIMATE_TYPE VARCHAR(32) NULL,
    COST_ESTIMATE_UNIT INT NULL,
    ITEM_COSTING_METHOD VARCHAR(32) NULL,
    CURRENCY_ID INT NULL,
    DEFAULT_RETURN_COST NUMERIC(18,6) NULL,
    DEFERRED_REVENUE_ACCOUNT_ID INT NULL,
    DEMAND_SOURCE VARCHAR(32) NULL,
    DEMAND_TIME_FENCE INT NULL,
    DEMAND_ESTIMATE_CHANGE NUMERIC(18,6) NULL,
    DISPLAY_NAME VARCHAR(64),
    DONATION_ITEM BIT NULL,
    DROP_SHIP_EXPENSE_ACCOUNT_ID INT NULL,
    DROP_SHIP_ITEM BIT NULL,
    EXCLUDE_FROM_WEB_SHOP BIT NULL,
    EXPENSE_ACCOUNT_ID INT NULL,
    FIXED_LOT_SIZE NUMERIC(18,6) NULL,
    FORWARD_CONSUMPTION_DAYS INT NULL,
    GAIN_LOST_ACCOUNT_ID INT NULL,
    HANDLING_COST NUMERIC(18,6) NULL,
    HANDLING_COST_UNIT_ID INT NULL,
    HAZMAT_HAZARD_CLASS VARCHAR(32) NULL,
    HAZMAT_HAZARD_ID VARCHAR(32) NULL,
    HAZMAT_ITEM BIT NULL,
    HAZMAT_ITEM_UNIT_ID INT NULL,
    HAZMAT_ITEM_QUANTITY NUMERIC(18,6) NULL,
    HAZMAT_PICKING_GROUP VARCHAR(32) NULL,
    HAZMAT_SHIPPINH_NAME VARCHAR(64) NULL,
    INCOME_ACCOUNT_ID INT NULL,
    INVENTORY_COUNT_INTERVAL INT NULL,
    ITEM_CARRIER INT NULL,
    PRICE_TYPE VARCHAR(32) NULL,
    LAST_INVENTORY_COUNT_DATE DATE NULL,
    LAST_PURCHASED_PRICE NUMERIC(18,6) NULL,
    LEAD_TIME INT NULL,
    MANUFACTURER VARCHAR(32),
    MANUFACTURER_ADD_ID INT NULL,
    MANUFACTURER_ADDRESS VARCHAR(64) NULL,
    MANUFACTURER_CITY VARCHAR(32) NULL,
    MANUFACTURED_COUNTRY VARCHAR(32) NULL,
    MANUFACTURER_PART_NUMBER VARCHAR(32) NULL,
    MANUFACTURER_POSTCODE VARCHAR(32) NULL,
    MANUFACTURER_STATE VARCHAR(32) NULL,
    MANUFACTURER_TARIFF VARCHAR(32) NULL,
    MANUFACTURER_TAX_ID VARCHAR(32) NULL,
    MATCH_BILL_TO_RECEIPT VARCHAR(32) NULL,
    MAXIMUM_DONATION_AMOUNT NUMERIC(18,6) NULL,
    MEMO VARCHAR(128) NULL,
    MINIMUM_QUANTITY BIT NULL,
    MINIMUM_QUANTITY_UNIT_ID INT NULL,
    MODEL_NUMBER VARCHAR(32) NULL,
    NEXT_INVENTORY_COUNT_DATE DATE NULL,
    OFFER_SUPPORT BIT NULL,
    ON_HAND_VALUE NUMERIC(18,6) NULL,
    ON_SPECIAL BIT NULL,
    ITEM_TRADING_TYPE VARCHAR(32) NULL,
    ONLINE_WEB_SHOP_ITEM BIT NULL,
    OUT_OF_STOCK_BEHAVIOR VARCHAR(32) NULL,
    OUT_OF_STOCK_MESSAGE VARCHAR(64) NULL,
    PARENT_ID INT NULL,
    PERIODIC_LOT_SIZE_DAYS INT NULL,
    PERIODIC_LOT_SIZE_TYPE VARCHAR(32) NULL,
    PREFERRED_LOCATION_ID INT NULL,
    PREFERRED_STOCK_LEVEL NUMERIC(18,6) NULL,
    PREFERRED_STOCK_LEVEL_DAYS NUMERIC(18,6) NULL,
    PREFERRED_STOCK_LEVEL_UNIT_ID INT NULL,
    PREFERRED_VENDOR_ID INT NULL,
    PRICE_INCLUDE_TAX BIT NULL,
    PRICING_GROUP_ID INT NULL,
    PURCHASE_DESCRIPTION VARCHAR(64) NULL,
    PRICE_VARIANCE_ACCOUNT_ID INT NULL,
    PURCHASE_TAX_CODE_ID INT NULL,
    PURCHASE_UNIT_ID INT NULL,
    QUANTITY_AVAILABLE NUMERIC(18,6) NULL,
    QUANTITY_AVAILABLE_UNIT_ID INT NULL,
    QUANTITY_BACK_ORDERED NUMERIC(18,6) NULL,
    QUANTITY_COMMITTED NUMERIC(18,6) NULL,
    QUANTITY_COMMITTED_UNIT_ID INT NULL,
    QUANTITY_ON_HAND NUMERIC(18,6) NULL,
    QUANTITY_ON_HAND_UNIT_ID INT NULL,
    QUANTITY_ON_ORDER NUMERIC(18,6) NULL,
    QUANTITY_ON_ORDER_UNIT_ID INT NULL,
    QUANTITY_REORDER_UNIT_ID INT NULL,
    REORDER_MULTIPLE NUMERIC(18,6) NULL,
    REORDER_POINT NUMERIC(18,6) NULL,
    RESCHEDULE_IN_DAYS INT NULL,
    RESCHEDULE_OUT_DAYS INT NULL,
    REV_REC_SCHEDULE INT NULL,
    SAFE_STOCK_LEVEL NUMERIC(18,6) NULL,
    SAFE_STOCK_LEVEL_DAYS INT NULL,
    SAFE_STOCK_LEVEL_UNIT_ID INT NULL,
    SALES_DESCRIPTION VARCHAR(64) NULL,
    SALES_TAX_CODE_ID INT NULL,
    SALES_UNIT_ID INT NULL,
    SCHEDULE_B_CODE VARCHAR(32) NULL,
    SCHEDULE_B_NUMBER VARCHAR(32) NULL,
    SCHEDULE_B_QUANTITY INT NULL,
    SEASON_DEMAND BIT NULL,
    SHIP_INDIVIDUAL BIT NULL,
    SHIPPING_COST NUMERIC(18,6) NULL,
    SHIPPING_COST_UNIT_ID INT NULL,
    SHOW_DONATION_AMOUNT BIT NULL,
    SHOW_PRICE BIT NULL,
    SPECIAL_DESCRIPTION VARCHAR(64) NULL,
    SPECIAL_ORDER_ITEM BIT NULL,
    STOCK_DESCRIPTION VARCHAR(64) NULL,
    STOCK_UNIT_ID INT NULL,
    STORE_DETAILED_DESCRIPTION VARCHAR(64) NULL,
    STORE_DISPLAY_IMAGE_ID INT NULL,
    STORE_DISPLAY_NAME VARCHAR(32) NULL,
    STORE_DISPLAY_THUMBNAIL_ID INT NULL,
    SUPPLY_LOT_SIZING_METHOD VARCHAR(32) NULL,
    SUPPLY_REPLENISHMENT_METHOD VARCHAR(32) NULL,
    SUPPLY_TIME_FENCE INT NULL,
    SUPPLY_TYPE VARCHAR(32) NULL,
    TAXABLE BIT NULL,
    TOTAL_VALUE NUMERIC(18,6) NULL,
    TRACK_LANDED_COST BIT NULL,
    TRANSFER_PRICE NUMERIC(18,6) NULL,
    UPC_CODE VARCHAR(32) NULL,
    USE_BINS BIT NULL,
    USE_MARGINAL_RATE BIT NULL,
    WEIGHT NUMERIC(18,6) NULL,
    WEIGHT_UNIT_ID INT NULL,
    REFERENCE_CODE VARCHAR(32) NULL,
    CATEGORY_TYPE VARCHAR(64) NULL,
    STATUS_ID INT NULL,
    MEAS_UNIT_ID INT NULL,
    COLOR VARCHAR(32) NULL,
    SIZE VARCHAR(32) NULL,
    ARTICLE_NUMBER VARCHAR(64) NULL,
    --InvoiceItem
    AMOUNT NUMERIC(18,6) NULL,
    AMOUNT_ORDERED NUMERIC(18,6) NULL,
    BIN_NUMBERS VARCHAR(32) NULL,
    CHARGE_TYPE VARCHAR(32) NULL,
    DEFER_REV_REC BIT NULL,
    DESCRIPTION VARCHAR(1024) NULL,
    GIFT_CERTIFICATE_FROM VARCHAR(64) NULL,
    GIFT_CERTIFICATE_MESSAGE VARCHAR(1024) NULL,
    GIFT_CERTIFICATE_NUMBER VARCHAR(32) NULL,
    GIFT_CERTIFICATE_RECIPIENT_EMAIL VARCHAR(64) NULL,
    GIFT_CERTIFICATE_RECIPIENT_NAME VARCHAR(64) NULL,
    GROSS_AMOUNT NUMERIC(18,6) NULL,
    INVOICE_ID INT NULL,
    ORDER_ITEM_ID INT NULL,
    ITEM_TYPE VARCHAR(32) NULL,
    ITEM_FULFILLED BIT NULL,
    LICENSE_CODE VARCHAR(32) NULL,
    PERCENT_COMPLETE NUMERIC(18,6) NULL,
    PRICE_LEVEL_ID INT NULL,
    QUANTITY NUMERIC(18,6) NULL,
    QUANTITY_FULFILLED NUMERIC(18,6) NULL,
    QUANTITY_ORDERED NUMERIC(18,6) NULL,
    QUANTITY_REMAINING NUMERIC(18,6) NULL,
    RATE NUMERIC(18,6) NULL,
    REV_REC_END_DATE DATETIME NULL,
    REV_REC_SCHEDULE_ID INT NULL,
    REV_REC_START_DATE DATETIME NULL,
    SERIAL_NUMBER VARCHAR(32) NULL,
    SHIP_ADDRESS_ID INT NULL,
    TAX_AMOUNT NUMERIC(18,6) NULL,
    TAX_CODE_ID INT NULL,
    TAX_RATE NUMERIC(18,6) NULL,
    TRADING_TYPE VARCHAR(32) NULL,
    UNIT_ID INT NULL,

    --PaymentItem
    ACCOUNT_ID INT NULL,
    APPLY BIT NULL,
    APPLY_DATE DATETIME NULL,
    AVAILABLE_TO_PARTNERS BIT NULL,
    DISCOUNT NUMERIC(18,6) NULL,
    DISCOUNT_AMOUNT NUMERIC(18,6) NULL,
    DISCOUNT_DATE DATETIME NULL,
    EXCHANGE_RATE NUMERIC(18,6) NULL,
    PAYMENT_ITEM_ID INT NULL,
    PAYMENT_AMOUNT NUMERIC(18,6) NULL,
    PAYMENT_METHOD_ID INT NULL,
    ORDER_ID INT NULL,
    TOTAL_AMOUNT NUMERIC(18,6) NULL,
    PAYMENT_ID INT NULL,

    --AssemblyItem
    BUILD_ENTIRE_ASSEMBLY INT NULL,
    BUILD_TIME INT NULL,
    EFFECTIVE_BOM_CONTROL VARCHAR (32) NULL,
    ENFORCE_MIN_QUANTITY BIT NULL,
    HAS_CHILDREN BIT NULL,
    MEMBER_BY_REVISION BIT NULL,
    PRODUCT_PRICE_VARIANCE_ACCOUNT INT NULL,

    --DiscountItem
    ITEM_BAR_CODE VARCHAR(32) NULL,
    DISCOUNT_ACCOUNT_ID INT NULL,
    HAS_SUB_ITEMS BIT NULL,
    INVENTORY_ID INT NULL,
    IS_BEFORE_TAX BIT NULL,
    DISCOUNT_ITEM_ID INT NULL,
    VENDOR_ID INT NULL,
    VENDOR_NAME VARCHAR (32) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT ACNT_ITEM_PK PRIMARY KEY(ID),
    CONSTRAINT ACNT_ITEM_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_ITEM_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_ITEM_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_ITEM_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_ITEM_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_ITEM_ASSET_ACCOUNT_FK FOREIGN KEY (ASSET_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_BILL_EXCHAGE_VARIANCE_ACCOUNT_FK FOREIGN KEY (BILL_EXCHAGE_VARIANCE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_BILL_PRICE_VARIANCE_ACCOUNT_FK FOREIGN KEY (BILL_PRICE_VARIANCE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_BILL_QUANTITY_VARIANCE_ACCOUNT_FK FOREIGN KEY (BILL_QUANTITY_VARIANCE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_COGS_ACCOUNT_FK FOREIGN KEY (COGS_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_DEFERRED_REVENUE_ACCOUNT_FK FOREIGN KEY (DEFERRED_REVENUE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_DROP_SHIP_EXPENSE_ACCOUNT_FK FOREIGN KEY (DROP_SHIP_EXPENSE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_EXPENSE_ACCOUNT_FK FOREIGN KEY (EXPENSE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_GAIN_LOST_ACCOUNT_FK FOREIGN KEY (GAIN_LOST_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_INCOME_ACCOUNT_FK FOREIGN KEY (INCOME_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_PRICE_VARIANCE_ACCOUNT_FK FOREIGN KEY (PRICE_VARIANCE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_HANDLING_COST_UNIT_FK FOREIGN KEY (HANDLING_COST_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_HAZMAT_ITEM_UNIT_ID_FK FOREIGN KEY (HAZMAT_ITEM_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_MINIMUM_QUANTITY_UNIT_FK FOREIGN KEY (MINIMUM_QUANTITY_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_PREFERRED_STOCK_LEVEL_UNIT_FK FOREIGN KEY (PREFERRED_STOCK_LEVEL_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_PURCHASE_UNIT_FK FOREIGN KEY (PURCHASE_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_QUANTITY_AVAILABLE_UNIT_FK FOREIGN KEY (QUANTITY_AVAILABLE_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_QUANTITY_COMMITTED_UNIT_FK FOREIGN KEY (QUANTITY_COMMITTED_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_QUANTITY_ON_HAND_UNIT_FK FOREIGN KEY (QUANTITY_ON_HAND_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_QUANTITY_ON_ORDER_UNIT_FK FOREIGN KEY (QUANTITY_ON_ORDER_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_QUANTITY_REORDER_UNIT_FK FOREIGN KEY (QUANTITY_REORDER_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_SAFE_STOCK_LEVEL_UNIT_FK FOREIGN KEY (SAFE_STOCK_LEVEL_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_SALES_UNIT_FK FOREIGN KEY (SALES_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_SHIPPING_COST_UNIT_FK FOREIGN KEY (SHIPPING_COST_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_STOCK_UNIT_FK FOREIGN KEY (STOCK_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_WEIGHT_UNIT_FK FOREIGN KEY (WEIGHT_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_ITEM_MANUFACTURER_ADD_FK FOREIGN KEY (MANUFACTURER_ADD_ID) REFERENCES COMM_ADDRESS(ID),
    CONSTRAINT ACNT_ITEM_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES ACNT_ITEM(ID),
    CONSTRAINT ACNT_ITEM_PREFERRED_LOCATION_FK FOREIGN KEY (PREFERRED_LOCATION_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT ACNT_ITEM_PREFERRED_VENDOR_FK FOREIGN KEY (PREFERRED_VENDOR_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT ACNT_ITEM_PURCHASE_TAX_CODE_FK FOREIGN KEY (PURCHASE_TAX_CODE_ID) REFERENCES ACNT_TAX_CODE(ID),
    CONSTRAINT ACNT_ITEM_SALES_TAX_CODE_FK FOREIGN KEY (SALES_TAX_CODE_ID) REFERENCES ACNT_TAX_CODE(ID),
    CONSTRAINT ACNT_ITEM_STORE_DISPLAY_IMAGE_FK FOREIGN KEY (STORE_DISPLAY_IMAGE_ID) REFERENCES DOCU_FILE(ID),
    CONSTRAINT ACNT_ITEM_STORE_DISPLAY_THUMBNAIL_FK FOREIGN KEY (STORE_DISPLAY_THUMBNAIL_ID) REFERENCES DOCU_FILE(ID),
    CONSTRAINT ACNT_ITEM_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT ACNT_ITEM_CODE_ORG_UNIQUE UNIQUE (CODE, ORGANISATION_ID),
    CONSTRAINT ACNT_ITEM_DISCOUNT_ACCOUNT_FK FOREIGN KEY (DISCOUNT_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_ITEM_INVENTORY_FK FOREIGN KEY (INVENTORY_ID) REFERENCES ACNT_ITEM(ID),
    CONSTRAINT ACNT_ITEM_DISCOUNT_ITEM_FK FOREIGN KEY (DISCOUNT_ITEM_ID) REFERENCES ACNT_ITEM(ID),
    CONSTRAINT ACNT_ITEM_VENDOR_FK FOREIGN KEY (VENDOR_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT ACNT_ITEM_STATUS_FK FOREIGN KEY (STATUS_ID) REFERENCES CORE_STATUS(ID),
    CONSTRAINT ACNT_ITEM_UNIT_TYPE_FK FOREIGN KEY (MEAS_UNIT_ID) REFERENCES ACNT_OTHER_MEASUREMENT_UNIT(ID)
);

CREATE INDEX ACNT_ITEM_IDX ON ACNT_ITEM(
    ORGANISATION_ID, SUBSIDIARY_ID
);

--Create table BillingSchedule
CREATE TABLE ACNT_BILLING_SCHEDULE(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    ARREARS BIT NULL,
    BILL_FOR_SUBTOTAL BIT NULL,
    BILL_FOR_ACTUAL BIT NULL,
    DAY_PERIOD INT NULL,
    SCHEDULE_FREQUENCY VARCHAR(32) NULL,
    NUMBER_REMAINING INT NULL,
    SCHEDULE_TYPE VARCHAR(32) NULL,
    START_TIME DATETIME NULL,
    TRANSACTION_TYPE VARCHAR(32) NULL,
    TRANSACTION_ID VARCHAR(32) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    CONSTRAINT ACNT_BILLING_SCHEDULE_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_BILLING_SCHEDULE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_BILLING_SCHEDULE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_BILLING_SCHEDULE_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_BILLING_SCHEDULE_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_BILLING_SCHEDULE_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_BILLING_SCHEDULE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_BILLING_SCHEDULE_IDX ON ACNT_BILLING_SCHEDULE(
    ORGANISATION_ID, SUBSIDIARY_ID
);

--Create table PaymentMethod
CREATE TABLE ACNT_PAYMENT_METHOD(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    ACCOUNT_ID INT NULL,
    BY_CREDIT_CARD BIT NULL,
--   BY_DEBIT_CARD BOOLEAN NULL,
--   BY_DEBIT_CARD BIT NULL,
    BY_ONLINE BIT NULL,
    LEVEL INT NULL,
    WITH_UNDEPOSITED_FUNDS BIT NULL,
    USE_EXPRESS_CHECKOUT BIT NULL,
    EXPRESS_CHECKOUT_AGREEMENT BIT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_PAYMENT_METHOD_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_PAYMENT_METHOD_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_PAYMENT_METHOD_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_PAYMENT_METHOD_ACCOUNT_FK FOREIGN KEY(ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_PAYMENT_METHOD_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_PAYMENT_METHOD_IDX ON ACNT_PAYMENT_METHOD(
    ORGANISATION_ID, SUBSIDIARY_ID
);

--Create table RevenueRecognitionSchedule
CREATE TABLE ACNT_REVENUE_RECOGNITION_SCHEDULE(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    AMORTIZATION_PERIOD NUMERIC(18,6) NULL,
    SCHEDULE_AMORTIZATION_TYPE VARCHAR(32) NULL,
    INITIAL_AMOUNT NUMERIC(18,6) NULL,
    PERIOD_OFFSET NUMERIC(18,6) NULL,
    REV_REC_OFFSET NUMERIC(18,6) NULL,
    SCHEDULE_RECURRENCE_TYPE VARCHAR(32) NULL,
    SCHEDULE_RECOGNITION_INTERVAL_SOURCE VARCHAR(32) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_REVENUE_RECOGNITION_SCHEDULE_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_REVENUE_RECOGNITION_SCHEDULE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_REVENUE_RECOGNITION_SCHEDULE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_REVENUE_RECOGNITION_SCHEDULE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_REVENUE_RECOGNITION_SCHEDULE_IDX ON ACNT_REVENUE_RECOGNITION_SCHEDULE(
    ORGANISATION_ID, SUBSIDIARY_ID
);

--Create table LeadSource
CREATE TABLE ACNT_LEAD_SOURCE(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    DESCRIPTION VARCHAR(1024) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_LEAD_SOURCE_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_LEAD_SOURCE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_LEAD_SOURCE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_LEAD_SOURCE_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_LEAD_SOURCE_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_LEAD_SOURCE_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_LEAD_SOURCE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_LEAD_SOURCE_IDX ON ACNT_LEAD_SOURCE(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID
);

--Create table PriceLevel
CREATE TABLE ACNT_PRICE_LEVEL(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    CURRENCY_ID INT NULL,
    DESCRIPTION VARCHAR(1024) NULL,
    PRICE_DISCOUNT NUMERIC(18,6) NULL,
    QUANTITY_LOW NUMERIC(18,6) NULL,
    QUANTITY_HIGH NUMERIC(18,6) NULL,
    PRICE NUMERIC(18,6) NULL,
    PRICE_UNIT_ID INT NULL,
    UPDATE_EXISTING_PRICES BIT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_PRICE_LEVEL_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_PRICE_LEVEL_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_PRICE_LEVEL_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_PRICE_LEVEL_CURRENCY_FK FOREIGN KEY(CURRENCY_ID) REFERENCES ACNT_CURRENCY(ID),
    CONSTRAINT ACNT_PRICE_LEVEL_PRICE_UNIT_FK FOREIGN KEY(PRICE_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT ACNT_PRICE_LEVEL_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_PRICE_LEVEL_IDX ON ACNT_PRICE_LEVEL(
    ORGANISATION_ID, SUBSIDIARY_ID
);

--Create table PromotionCode
CREATE TABLE ACNT_PROMOTION_CODE(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    APPLY_TYPE VARCHAR(32) NULL,
    CODE_PATTERN VARCHAR(64) NULL,
    DESCRIPTION VARCHAR(1024) NULL,
    DISPLAY_NAME VARCHAR(64) NULL,
    DISCOUNT_ITEM_ID INT NULL,
    EXPENSE_ACCOUNT_ID INT NULL,
    END_DATE DATETIME NULL,
    MINIMUM_ORDER_AMOUNT NUMERIC(18,6) NULL,
    MAXIMUM_NUMBER INT NULL,
    PARENT_ID INT NULL,
    DISCOUNT_BY_PERCENT BIT NULL,
    RATE NUMERIC(18,6) NULL,
    START_DATE DATETIME NULL,
    USE_TYPE VARCHAR(32) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_PROMOTION_CODE_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_PROMOTION_CODE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_PROMOTION_CODE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_PROMOTION_CODE_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_PROMOTION_CODE_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_PROMOTION_CODE_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_PROMOTION_CODE_DISCOUNT_ITEM_FK FOREIGN KEY (DISCOUNT_ITEM_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT ACNT_PROMOTION_CODE_EXPENSE_ACCOUNT_FK FOREIGN KEY (EXPENSE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT (ID),
    CONSTRAINT ACNT_PROMOTION_CODE_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES ACNT_PROMOTION_CODE (ID),
    CONSTRAINT ACNT_PROMOTION_CODE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_PROMOTION_CODE_IDX ON ACNT_PROMOTION_CODE(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID
);

--Create table WinLossReason
CREATE TABLE ACNT_WIN_LOSS_REASON(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    DESCRIPTION VARCHAR(1024) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_WIN_LOSS_REASON_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_WIN_LOSS_REASON_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_WIN_LOSS_REASON_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_WIN_LOSS_REASON_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_WIN_LOSS_REASON_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_WIN_LOSS_REASON_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_WIN_LOSS_REASON_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_WIN_LOSS_REASON_IDX ON ACNT_WIN_LOSS_REASON(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID
);

--Create table Bin
CREATE TABLE ACNT_OTHER_BIN(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR (32) NULL,

     --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    BIN_NUMBER VARCHAR (32) NULL,
    DESCRIPTION VARCHAR (128) NULL,
    MEMO VARCHAR (128) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    CONSTRAINT ACNT_OTHER_BIN_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_OTHER_BIN_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_BIN_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_OTHER_BIN_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_BIN_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_BIN_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_BIN_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_BIN_IDX ON ACNT_OTHER_BIN(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID
);

--Create table InventoryItemBinNumber
CREATE TABLE ACNT_INVENTORY_ITEM_BIN_NUMBER(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR (32) NULL,
    CODE VARCHAR (32) NULL,

     --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    INVENTORY_ITEM_BIN_ID INT NULL,
    ITEM_ID INT NULL,
    BIN_LOCATION_ID INT NULL,
    PREFERRED_BIN BIT NULL,
    QUANTITY_AVAILABLE NUMERIC (18, 6) NULL,
    QUANTITY_IN_TRANSIT NUMERIC (18, 6) NULL,
    QUANTITY_ON_HAND NUMERIC (18, 6) NULL,
    QUANTITY_ON_ORDER NUMERIC (18, 6) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_BIN_FK FOREIGN KEY (INVENTORY_ITEM_BIN_ID) REFERENCES ACNT_INVENTORY_ITEM_BIN_NUMBER (ID),
    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_ITEM_FK FOREIGN KEY (ITEM_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_BIN_LOCATION_FK FOREIGN KEY (BIN_LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_INVENTORY_ITEM_BIN_NUMBER_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_INVENTORY_ITEM_BIN_NUMBER_IDX ON ACNT_INVENTORY_ITEM_BIN_NUMBER(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID, INVENTORY_ITEM_BIN_ID
);

--Create table BillingScheduleEvent
CREATE TABLE ACNT_OTHER_BILLING_EVENT(
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    BILLING_SCHEDULE_ID INT NULL,
    COMMENT VARCHAR(128) NULL,
    EVENT_CODE VARCHAR(32) NULL,
    EVENT_DATE DATETIME NULL,
    EVENT_COMPLETED_DATE DATETIME NULL,
    COMPLETED BIT NULL,

     --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_OTHER_BILLING_EVENT_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_OTHER_BILLING_EVENT_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_BILLING_EVENT_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_OTHER_BILLING_EVENT_BILLING_SCHEDULE_FK FOREIGN KEY(BILLING_SCHEDULE_ID) REFERENCES ACNT_BILLING_SCHEDULE(ID),
    CONSTRAINT ACNT_OTHER_BILLING_EVENT_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_BILLING_EVENT_IDX ON ACNT_OTHER_BILLING_EVENT(
    ORGANISATION_ID, SUBSIDIARY_ID, BILLING_SCHEDULE_ID
);

--Create table BillingScheduleRecurrence
CREATE TABLE ACNT_OTHER_BILLING_RECURRENCE(
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    BILLING_SCHEDULE_ID INT NULL,
    AMOUNT NUMERIC(18,6) NULL,
    COUNT INT NULL,
    RECURRENCE_ID VARCHAR(32) NULL,
    RECUREENCE_DATE DATETIME NULL,
    RELATED_TO_PREVIOUS BIT NULL,
    RECURRENCE_UNIT VARCHAR(32) NULL,

     --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_OTHER_BILLING_RECURRENCE_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_OTHER_BILLING_RECURRENCE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_BILLING_RECURRENCE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_OTHER_BILLING_RECURRENCE_BILLING_SCHEDULE_FK FOREIGN KEY(BILLING_SCHEDULE_ID) REFERENCES ACNT_BILLING_SCHEDULE(ID),
    CONSTRAINT ACNT_OTHER_BILLING_RECURRENCE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_BILLING_RECURRENCE_IDX ON ACNT_OTHER_BILLING_RECURRENCE(
    ORGANISATION_ID, SUBSIDIARY_ID, BILLING_SCHEDULE_ID
);

--Create PromotionCodeCurrency
CREATE TABLE ACNT_OTHER_PROMOTION_CURRENCY(
    ID INT IDENTITY(1,1) NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    CODE_PATTERN VARCHAR(32) NULL,
    CURRENCY_ID INT NULL,
    MINIMUM_ORDER_AMOUNT NUMERIC(18,6) NULL,
    PROMOTION_CODE_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_OTHER_PROMOTION_CURRENCY_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_CURRENCY_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_CURRENCY_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_CURRENCY_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_CURRENCY_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_CURRENCY_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_CURRENCY_CURRENCY_FK FOREIGN KEY (CURRENCY_ID) REFERENCES ACNT_CURRENCY (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_CURRENCY_PROMOTION_CODE_FK FOREIGN KEY (PROMOTION_CODE_ID) REFERENCES ACNT_PROMOTION_CODE (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_CURRENCY_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_PROMOTION_CURRENCY_IDX ON ACNT_OTHER_PROMOTION_CURRENCY(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID, PROMOTION_CODE_ID
);

--Create table PromotionCodePartner
CREATE TABLE ACNT_OTHER_PROMOTION_PARTNER(
    ID INT IDENTITY(1,1) NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    PROMOTION_CODE_ID INT NULL,
    PARTNER_PROMOTION_CODE VARCHAR(32) NULL,
    PARTNER_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_OTHER_PROMOTION_PARTNER_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_PARTNER_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_PARTNER_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_PARTNER_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_PARTNER_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_PARTNER_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_PARTNER_PROMOTION_CODE_FK FOREIGN KEY (PROMOTION_CODE_ID) REFERENCES ACNT_PROMOTION_CODE (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_PARTNER_PARTNER_FK FOREIGN KEY (PARTNER_ID) REFERENCES ACNT_OTHER_PROMOTION_PARTNER (ID),
    CONSTRAINT ACNT_OTHER_PROMOTION_PARTNER_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_PROMOTION_PARTNER_IDX ON ACNT_OTHER_PROMOTION_PARTNER(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID, PROMOTION_CODE_ID
);

--Create table RevRecScheduleRecurrence
CREATE TABLE ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE(
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    INCOME_ACCOUNT_ID INT NULL,
    PERIOD_OFFSET INT NULL,
    RECOGNITION_AMOUNT NUMERIC(18,6) NULL,
    REVENVE_RECOGNITION_SCHEDULE_ID INT NULL,
    SALES_ORDER_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE_INCOME_ACCOUNT_FK FOREIGN KEY(INCOME_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE_REVENVE_RECOGNITION_SCHEDULE_FK FOREIGN KEY(REVENVE_RECOGNITION_SCHEDULE_ID) REFERENCES ACNT_REVENUE_RECOGNITION_SCHEDULE(ID),
    CONSTRAINT ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE_IDX ON ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE(
    ORGANISATION_ID, SUBSIDIARY_ID
);

--Create table SalesRole
CREATE TABLE ACNT_OTHER_SALES_ROLE(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    DESCRIPTION VARCHAR(1024) NULL,
    SALES_REPRESENTATIVE BIT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_OTHER_SALES_ROLE_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_OTHER_SALES_ROLE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_SALES_ROLE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_OTHER_SALES_ROLE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_SALES_ROLE_IDX ON ACNT_OTHER_SALES_ROLE(
    ORGANISATION_ID, SUBSIDIARY_ID
);

--Create ItemRevision
CREATE TABLE ACNT_OTHER_ITEM_REVISION(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR (32) NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    EFFECTIVE_DATE DATE NULL,
    MEMO VARCHAR (128) NULL,
    OBSOLETE_DATE DATE NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_OTHER_ITEM_REVISION_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_OTHER_ITEM_REVISION_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_ITEM_REVISION_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_OTHER_ITEM_REVISION_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_ITEM_REVISION_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_ITEM_REVISION_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_ITEM_REVISION_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_ITEM_REVISION_IDX ON ACNT_OTHER_ITEM_REVISION(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID
);

--Create table ItemMember
CREATE TABLE ACNT_OTHER_ITEM_MEMBER(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR (32) NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    BOM_QUANTITY NUMERIC (18, 6) NULL,
    COMPONENT_YIELD NUMERIC (18, 6) NULL,
    DESCRIPTION VARCHAR (128) NULL,
    EFFECTIVE_DATE DATE NULL,
    ASSEMBLY_ITEM_ID INT NULL,
    ITEM_ID INT NULL,
    REVISION_ID INT NULL,
    LINE_NUMBER INT NULL,
    OBSOLETE_DATE DATE NULL,
    QUANTITY NUMERIC (18, 6) NULL,
    TAX_CODE_ID INT NULL,
    UNIT_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_PK PRIMARY KEY (ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_ASSEMBLY_FK FOREIGN KEY (ASSEMBLY_ITEM_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_ITEM_FK FOREIGN KEY (ITEM_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_REVISION_FK FOREIGN KEY (REVISION_ID) REFERENCES ACNT_OTHER_ITEM_REVISION (ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_TAX_CODE_FK FOREIGN KEY (TAX_CODE_ID) REFERENCES ACNT_TAX_CODE (ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_UNIT_FK FOREIGN KEY (UNIT_ID) REFERENCES ACNT_UNIT_TYPE (ID),
    CONSTRAINT ACNT_OTHER_ITEM_MEMBER_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX ACNT_OTHER_ITEM_MEMBER_IDX ON ACNT_OTHER_ITEM_MEMBER(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID
);

-- ----------------------------------------------------------
-- miracle Business Configuration database initialisation script.
-- ----------------------------------------------------------
--Create table BusinessConfiguration
CREATE TABLE BIZ_CONFIGURATION(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(128) NULL,
    CODE VARCHAR(128),
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    BUSINESS_CATEGORY_ID INT NOT NULL,
    CORRESPOND_ENTITY_TYPE VARCHAR(64) NULL,
    DATA_TYPE VARCHAR(32) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    HIGH_RANGE_VALUE VARCHAR(64) NULL,
    LENDER_ID INT NULL,
    LOW_RANGE_VALUE VARCHAR(64) NULL,
    STUFF_ID INT NULL,
    UNIT_TYPE_ID INT NULL,
    VALUE VARCHAR(1024) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    BANKING_ID INT NULL,

    CONSTRAINT BIZ_CONFIGURATION_PK PRIMARY KEY (ID),
    CONSTRAINT BIZ_CONFIGURATION_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT BIZ_CONFIGURATION_LENDER_FK FOREIGN KEY(LENDER_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT BIZ_CONFIGURATION_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT BIZ_CONFIGURATION_BUSINESS_CATEGORY_FK FOREIGN KEY(BUSINESS_CATEGORY_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT BIZ_CONFIGURATION_STUFF_FK FOREIGN KEY(STUFF_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT BIZ_CONFIGURATION_UNIT_TYPE_FK FOREIGN KEY(UNIT_TYPE_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT BIZ_CONFIGURATION_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

-- CREATE INDEX BIZ_CONFIGURATION_IDX ON BIZ_CONFIGURATION(
--     ORGANISATION_ID, SUBSIDIARY_ID, BUSINESS_CATEGORY_ID, STUFF_ID
-- );

-- ----------------------------------------------------------
-- miracle Employee database initialisation script.
-- ----------------------------------------------------------

--  Create Employee Role table
CREATE TABLE EMPE_ROLE (
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    DESCRIPTION VARCHAR(256) NULL,
    ROLE_TYPE VARCHAR(32) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT EMPE_ROLE_PK PRIMARY KEY(ID),
    CONSTRAINT EMPE_ROLE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT EMPE_ROLE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT EMPE_ROLE_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT EMPE_ROLE_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT EMPE_ROLE_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT EMPE_ROLE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX EMPE_ROLE_IDX ON EMPE_ROLE (
    ORGANISATION_ID, NAME, SUBSIDIARY_ID
);

--Create table PayrollItem
CREATE TABLE EMPE_PAYROLL_ITEM(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    DESCRIPTION VARCHAR(256) NULL,
    EXPENSE_ACCOUNT_ID INT NULL,
    LIABILITY_ACCOUNT_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT EMPE_PAYROLL_ITEM_PK PRIMARY KEY(ID),
    CONSTRAINT EMPE_PAYROLL_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT EMPE_PAYROLL_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT EMPE_PAYROLL_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT EMPE_PAYROLL_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT EMPE_PAYROLL_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT EMPE_PAYROLL_EXPENSE_FK FOREIGN KEY(EXPENSE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT EMPE_PAYROLL_LIABILITY_FK FOREIGN KEY(LIABILITY_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT EMPE_PAYROLL_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX EMPE_PAYROLL_ITEM_IDX ON EMPE_PAYROLL_ITEM (
    ORGANISATION_ID, NAME
);

--Create table EmployeeAccruedTime
CREATE TABLE EMPE_EMPLOYEE_ACCRUED_TIME(
    ID INT IDENTITY(1,1) NOT NULL,

    ACCRUAL_HOURS NUMERIC(18,6) NULL,
    ACCRUAL_METHOD VARCHAR(32) NULL,
    ACCRUAL_RATE NUMERIC(18,6) NULL,
    EFFECTIVE_DATE DATETIME NULL,
    EXPIRATION_DATE DATETIME NULL,
    MAX_ACCRUED_HOURS NUMERIC(18,6) NULL,
    MONETARY_RATE NUMERIC(18,6) NULL,
    PAYROLL_ITEM_ID INT NULL,
    REST_YEARLY BIT NULL,
    STAFF_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT EMPE_EMPLOYEE_ACCRUED_TIME_PK PRIMARY KEY(ID),
    CONSTRAINT EMPE_EMPLOYEE_ACCRUED_TIMEE_STAFF_FK FOREIGN KEY(STAFF_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT EMPE_EMPLOYEE_ACCRUED_TIME_PAYROLL_FK FOREIGN KEY(PAYROLL_ITEM_ID) REFERENCES EMPE_PAYROLL_ITEM(ID),
    CONSTRAINT EMPE_EMPLOYEE_ACCRUED_TIME_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE UNIQUE INDEX EMPE_EMPLOYEE_ACCRUED_TIME_IDX ON EMPE_EMPLOYEE_ACCRUED_TIME (
    STAFF_ID, PAYROLL_ITEM_ID
);

--Create table EmployeeAddressBook
CREATE TABLE EMPE_EMPLOYEE_ADDRESS_BOOK(
    ID INT IDENTITY(1,1) NOT NULL,
    LABEL VARCHAR(64) NULL,

    ADDRESS_ID INT NULL,
    DEFAULT_BILLING BIT NULL,
    DEFAULT_RESIDENTIAL BIT NULL,
    DEFAULT_SHIPPING BIT NULL,
    STAFF_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT EMPE_EMPLOYEE_ADDRESS_BOOK_PK PRIMARY KEY(ID),
    CONSTRAINT EMPE_EMPLOYEE_ADDRESS_BOOK_STAFF_FK FOREIGN KEY(STAFF_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT EMPE_EMPLOYEE_ADDRESS_BOOK_ADDRESS_FK FOREIGN KEY(ADDRESS_ID) REFERENCES COMM_ADDRESS(ID),
    CONSTRAINT EMPE_EMPLOYEE_ADDRESS_BOOK_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX EMPE_EMPLOYEE_ADDRESS_BOOK_IDX ON EMPE_EMPLOYEE_ADDRESS_BOOK (
    DEFAULT_BILLING, DEFAULT_SHIPPING
);
-- ----------------------------------------------------------
-- miracle General database initialisation script.
-- ----------------------------------------------------------

--  Create General Audit Log table
CREATE TABLE GNRL_AUDIT_LOG (
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    AUDIT_ACTION VARCHAR(64) NULL,
    AUDIT_DATE DATETIME NULL,
    AUDIT_CATEGORY VARCHAR(32) NULL,
    AUDIT_NOTE VARCHAR(1024) NULL,
    AUDIT_TYPE VARCHAR(32) NULL,
    DETAILS VARCHAR(1024) NULL,
    DOMAIN VARCHAR(32) NULL,
    EMPLOYEE_ID INT NULL,
    ENTITY_ID INT NULL,
    ENTITY_TYPE VARCHAR(64) NULL,
    ON_BEHALF VARCHAR(128) NULL,
    RESULT VARCHAR(32) NULL,
    CONSTRAINT GNRL_AUDIT_LOG_PK PRIMARY KEY(ID),
    CONSTRAINT GNRL_AUDIT_LOG_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT GNRL_AUDIT_LOG_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT GNRL_AUDIT_LOG_EMPLOYEE_FK FOREIGN KEY(EMPLOYEE_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX GNRL_AUDIT_LOG_IDX ON GNRL_AUDIT_LOG (
    ORGANISATION_ID, SUBSIDIARY_ID, EMPLOYEE_ID
);

--  Create General Transaction Audit Log table
CREATE TABLE GNRL_TRANSACTION_AUDIT_LOG (
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    AUDIT_ACTION VARCHAR(64) NULL,
    AUDIT_DATE DATETIME NULL,
    AUDIT_NOTE VARCHAR(1024) NULL,
    DETAILS VARCHAR(1024) NULL,
    DOMAIN VARCHAR(32) NULL,
    EMPLOYEE_ID INT NULL,
    ENTITY_ID INT NULL,
    ENTITY_TYPE VARCHAR(64) NULL,
    CONSTRAINT GNRL_TRANSACTION_AUDIT_LOG_PK PRIMARY KEY(ID),
    CONSTRAINT GNRL_TRANSACTION_AUDIT_LOG_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT GNRL_TRANSACTION_AUDIT_LOG_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT GNRL_TRANSACTION_AUDIT_LOG_EMPLOYEE_FK FOREIGN KEY(EMPLOYEE_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX GNRL_TRANSACTION_AUDIT_LOG_IDX ON GNRL_TRANSACTION_AUDIT_LOG (
    ORGANISATION_ID, SUBSIDIARY_ID, EMPLOYEE_ID
);

-- ----------------------------------------------------------
-- miracle Platform Management database initialisation script.
-- ----------------------------------------------------------

--  Create Management Data Node table
CREATE TABLE MANG_DATA_NODE (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    DB_NAME VARCHAR(128) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    LOGIN VARCHAR(128) NULL,
    MAJOR_NODE_ID INT NULL,
    PASSWORD VARCHAR(64) NULL,
    PORT VARCHAR(8) NULL,
    SERVER VARCHAR(64) NULL,
    TYPE VARCHAR(32) NOT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT MANG_DATA_NODE_PK PRIMARY KEY(ID),
    CONSTRAINT MANG_DATA_NODE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT MANG_DATA_NODE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT MANG_DATA_NODE_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT MANG_DATA_NODE_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT MANG_DATA_NODE_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT MANG_DATA_NODE_MAJOR_NODE_FK FOREIGN KEY (MAJOR_NODE_ID) REFERENCES MANG_DATA_NODE (ID),
    CONSTRAINT MANG_DATA_NODE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX MANG_DATA_NODE_IDX ON MANG_DATA_NODE (
    ORGANISATION_ID, SUBSIDIARY_ID, NAME
);

-- ----------------------------------------------------------
-- miracle Configuration database initialisation script.
-- ----------------------------------------------------------
--Create table Dialogue
CREATE TABLE CNFG_DIALOGUE(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    ORGANISATION_ID INT NULL,

    DESCRIPTION VARCHAR(256) NULL,
    DIALOGUE_TYPE VARCHAR(16) NOT NULL,
    CONFIG_TYPE VARCHAR(16) NOT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CNFG_DIALOGUE_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_DIALOGUE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_DIALOGUE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX CNFG_DIALOGUE_IDX ON CNFG_DIALOGUE (
    DIALOGUE_TYPE, CONFIG_TYPE, NAME
);

--  Create Configuration Domain table
CREATE TABLE CNFG_DOMAIN (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    CONFIG_TYPE VARCHAR(16) NULL,
    DESCRIPTION VARCHAR(256) NULL,

    CONSTRAINT CNFG_DOMAIN_PK PRIMARY KEY(ID)
);

--  Create Configuration Product table
CREATE TABLE CNFG_PRODUCT (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    DOMAIN_ID INT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CNFG_PRODUCT_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_PRODUCT_DOMAIN_FK FOREIGN KEY(DOMAIN_ID) REFERENCES CNFG_DOMAIN(ID),
    CONSTRAINT CNFG_PRODUCT_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_PRODUCT_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT CNFG_PRODUCT_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT CNFG_PRODUCT_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT CNFG_PRODUCT_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT CNFG_PRODUCT_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX CNFG_PRODUCT_IDX ON CNFG_PRODUCT (
    NAME
);

-- Create Configuration Action Adapter table
CREATE TABLE CNFG_ACTION_ADAPTER (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    ORGANISATION_ID INT NULL,

    CONFIG_TYPE VARCHAR(16) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    FORM_TYPE VARCHAR (64) NULL,
    FILTER_NAME VARCHAR (64) NULL,
    MULTI_SELECT BIT NULL,
    OPERATION_TYPE VARCHAR(64) NULL,
    VIEW_GROUP_NAME VARCHAR(64) NULL,
    QUERY_TYPE VARCHAR(16) NULL,
    FILED_NAME VARCHAR(32) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT CNFG_ACTION_ADAPTER_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_ACTION_ADAPTER_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_ACTION_ADAPTER_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX CNFG_ACTION_ADAPTER_IDX ON CNFG_ACTION_ADAPTER (
    ORGANISATION_ID, NAME
);

--  Create Configuration Action Handler table
CREATE TABLE CNFG_OTHER_ACTION_HANDLER (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    ORGANISATION_ID INT NULL,

    ADAPTER_ID INT NULL,
    CONFIG_TYPE VARCHAR(16) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    DIALOGUE_ID INT NULL,
    HANDLER_TYPE VARCHAR(16) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT CNFG_OTHER_ACTION_HANDLER_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_OTHER_ACTION_HANDLER_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_OTHER_ACTION_HANDLER_ADAPTER_FK FOREIGN KEY(ADAPTER_ID) REFERENCES CNFG_ACTION_ADAPTER(ID),
    CONSTRAINT CNFG_OTHER_ACTION_HANDLER_DIALOGUE_FK FOREIGN KEY(DIALOGUE_ID) REFERENCES CNFG_DIALOGUE(ID),
    CONSTRAINT CNFG_OTHER_ACTION_HANDLER_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX CNFG_OTHER_ACTION_HANDLER_IDX ON CNFG_OTHER_ACTION_HANDLER (
    ORGANISATION_ID, NAME
);

--  Create Configuration Action Item table
CREATE TABLE CNFG_ACTION_ITEM (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(64) NULL,
    ORGANISATION_ID INT NULL,

    DESCRIPTION VARCHAR(256) NULL,
    ACTION_HANDLER_ID INT NULL,
    CONFIG_TYPE VARCHAR(16) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CNFG_ACTION_ITEM_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_ACTION_ITEM_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_ACTION_ITEM_HANDLER_FK FOREIGN KEY(ACTION_HANDLER_ID) REFERENCES CNFG_OTHER_ACTION_HANDLER(ID),
    CONSTRAINT CNFG_ACTION_ITEM_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);
CREATE INDEX CNFG_ACTION_ITEM_IDX ON CNFG_ACTION_ITEM (
    ORGANISATION_ID, NAME
);

--  Create Configuration Data Source table
CREATE TABLE CNFG_DATA_SOURCE (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    CONFIG_TYPE VARCHAR(16) NULL,

    ENABLED BIT NULL,
    CREATABLE BIT NULL,
    READABLE BIT NULL,
    UPDATABLE BIT NULL,
    DELETABLE BIT NULL,
    IMPORTABLE BIT NULL,
    EXPORTABLE BIT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT CNFG_DATA_SOURCE_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_DATA_SOURCE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

--  Create Configuration Menu table
CREATE TABLE CNFG_MENU (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    ORGANISATION_ID INT NULL,

    ACTION_ITEM_ID INT NULL,
    CONFIG_TYPE VARCHAR(16) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    DISPLAY_ORDER INT NULL,
    ENABLED BIT NULL,
    ICON VARCHAR(128) NULL,
    PLATFORM_MENU BIT NULL,
    PARENT_ID INT NULL,
    DATA_SOURCE_ID INT NULL,
    DATA_SOURCE_SEARCH_KEY VARCHAR(128) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CNFG_MENU_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_MENU_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_MENU_ACTION_ITEM_FK FOREIGN KEY (ACTION_ITEM_ID) REFERENCES CNFG_ACTION_ITEM(ID),
    CONSTRAINT CNFG_MENU_ACTION_PARENT_FK FOREIGN KEY (PARENT_ID) REFERENCES CNFG_MENU(ID),
    CONSTRAINT CNFG_MENU_DATA_SOURCE_FK FOREIGN KEY (DATA_SOURCE_ID) REFERENCES CNFG_DATA_SOURCE(ID),
    CONSTRAINT CNFG_MENU_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX CNFG_MENU_IDX ON CNFG_MENU (
    ORGANISATION_ID, NAME
);

--  Create Configuration Operation Permission table
CREATE TABLE CNFG_OPERATION_PERMISSION (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    EMPLOYEE_ROLE_ID INT NULL,
    MENU_ID INT NULL,
    DATA_SOURCE_ID INT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    ENABLED BIT NULL,
    CREATABLE BIT NULL,
    READABLE BIT NULL,
    UPDATABLE BIT NULL,
    DELETABLE BIT NULL,
    IMPORTABLE BIT NULL,
    EXPORTABLE BIT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT CNFG_OPERATION_PERMISSION_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_OPERATION_PERMISSION_EMPLOYEE_ROLE_FK FOREIGN KEY(EMPLOYEE_ROLE_ID) REFERENCES EMPE_ROLE(ID),
    CONSTRAINT CNFG_OPERATION_PERMISSION_MENU_FK FOREIGN KEY(MENU_ID) REFERENCES CNFG_MENU(ID),
    CONSTRAINT CNFG_OPERATION_PERMISSION_DATA_SOURCE_FK FOREIGN KEY(DATA_SOURCE_ID) REFERENCES CNFG_DATA_SOURCE(ID),
    CONSTRAINT CNFG_OPERATION_PERMISSION_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT CNFG_OPERATION_PERMISSION_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_OPERATION_PERMISSION_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID)
);
CREATE INDEX CNFG_OPERATION_PERMISSION_IDX ON CNFG_OPERATION_PERMISSION (
    ORGANISATION_ID, SUBSIDIARY_ID, EMPLOYEE_ROLE_ID
);

-- Create table Relationship
CREATE TABLE RLAT_OTHER_RELATIONSHIP (
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    OWNER BIT NULL,
    RELATION_ID INT NULL,
    TYPE VARCHAR(16) NULL,
    GROUP_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    MENU_ID INT NULL,
    EMPLOYEE_ROLE_ID INT NULL,
    CAN_CREATE BIT NULL,
    CONSTRAINT RLAT_OTHER_RELATIONSHIP_PK PRIMARY KEY (ID),
    CONSTRAINT RLAT_OTHER_RELATIONSHIP_ORGANISATION_FK FOREIGN KEY (ORGANISATION_ID) REFERENCES COMM_ORGANISATION (ID),
    CONSTRAINT RLAT_OTHER_RELATIONSHIP_RELATION_FK FOREIGN KEY (RELATION_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT RLAT_OTHER_RELATIONSHIP_GROUP_FK FOREIGN KEY (GROUP_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT RLAT_OTHER_RELATIONSHIP_MENU_FK FOREIGN KEY (MENU_ID) REFERENCES CNFG_MENU(ID),
    CONSTRAINT RLAT_OTHER_RELATIONSHIP_EMPLOYEE_ROLE_FK FOREIGN KEY (EMPLOYEE_ROLE_ID) REFERENCES EMPE_ROLE(ID)
);

CREATE INDEX RLAT_OTHER_RELATIONSHIP_IDX ON RLAT_OTHER_RELATIONSHIP (
    ORGANISATION_ID, GROUP_ID
);

--  Create Table InventoryItemStatistics
CREATE TABLE TRAN_INVENTORY_ITEM_STATISTICS(
     ID INT IDENTITY(1,1) NOT NULL,
     NAME VARCHAR(64) NOT NULL,
     CODE VARCHAR(32) NULL,
     STATISTICS_DATE DATETIME NULL,

     --ClassificationDetails
     ORGANISATION_ID INT NULL,
     SUBSIDIARY_ID INT NULL,
     DEPARTMENT_ID INT NULL,
     LOCATION_ID INT NULL,
     CLASSIFICATION_ID INT NULL,

     INVENTORY_IEM_ID INT NULL,
     MEMO VARCHAR(128) NULL,
     STOCK_QUANTITY NUMERIC(18,6) NULL,
     STOCK_AMOUNT NUMERIC(18,6) NULL,
     SALE_COST_AMOUNT NUMERIC(18,6) NULL,
     RATE NUMERIC(18,6) NULL,
     STATISTICS_YEAR INT NULL,
     STATISTICS_MONTH INT NULL,
     QUARTER_STATISTICS BIT NULL,
     YEAR_STATISTICS BIT NULL,

     --EntityCommonProperties
     OWNER_ID INT NULL,
     CREATED_TIME DATETIME NULL,
     LAST_MODIFIED_TIME DATETIME NULL,
     ACTIVE BIT NOT NULL,
     DELETED BIT NOT NULL,
     CONSTRAINT TRAN_INVENTORY_ITEM_STATISTICS_PK PRIMARY KEY(ID),
     CONSTRAINT TRAN_INVENTORY_ITEM_STATISTICS_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
     CONSTRAINT TRAN_INVENTORY_ITEM_STATISTICS_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
     CONSTRAINT TRAN_INVENTORY_ITEM_STATISTICS_DEPARTMENT_FK FOREIGN KEY(DEPARTMENT_ID) REFERENCES ACNT_GROUP(ID),
     CONSTRAINT TRAN_INVENTORY_ITEM_STATISTICS_LOCATION_FK FOREIGN KEY(LOCATION_ID) REFERENCES ACNT_GROUP(ID),
     CONSTRAINT TRAN_INVENTORY_ITEM_STATISTICS_CLASSIFICATION_FK FOREIGN KEY(CLASSIFICATION_ID) REFERENCES ACNT_GROUP(ID),
     CONSTRAINT TRAN_INVENTORY_ITEM_STATISTICS_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
     CONSTRAINT TRAN_INVENTORY_ITEM_STATISTICS_INVENTORY_ITEM_FK FOREIGN KEY(INVENTORY_IEM_ID) REFERENCES ACNT_ITEM(ID)
);

CREATE INDEX TRAN_INVENTORY_ITEM_STATISTICS_IDX ON TRAN_INVENTORY_ITEM_STATISTICS(
     ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID
);

-- Create Configuration-Other Action Widget table
CREATE TABLE CNFG_OTHER_ACTION_WIDGET (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,

    ACTION_HANDLER_ID INT NULL,
    ACTION_NAME VARCHAR(128) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    CONFIG_TYPE VARCHAR(16) NULL,
    WIDGET_TYPE VARCHAR(16) NULL,
    EVENT_TYPE VARCHAR(32) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CNFG_OTHER_ACTION_WIDGET_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_OTHER_ACTION_WIDGET_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_OTHER_ACTION_WIDGET_HANDLER_FK FOREIGN KEY(ACTION_HANDLER_ID) REFERENCES CNFG_OTHER_ACTION_HANDLER(ID),
    CONSTRAINT CNFG_OTHER_ACTION_WIDGET_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);
CREATE INDEX CNFG_OTHER_ACTION_WIDGET_IDX ON CNFG_OTHER_ACTION_WIDGET (
    ORGANISATION_ID, NAME
);

-- Create Configuration-Other Form Group table
CREATE TABLE CNFG_OTHER_FORM_GROUP (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,

    ADAPTER_ID INT NULL,
    CONFIG_TYPE VARCHAR(16) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    DISPLAY_ORDER INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CNFG_OTHER_FORM_GROUP_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_OTHER_FORM_GROUP_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_OTHER_FORM_GROUP_ADAPTER_FK FOREIGN KEY(ADAPTER_ID) REFERENCES CNFG_ACTION_ADAPTER(ID),
    CONSTRAINT CNFG_OTHER_FORM_GROUP_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);
CREATE INDEX CNFG_OTHER_FORM_GROUP_IDX ON CNFG_OTHER_FORM_GROUP (
    ORGANISATION_ID, NAME
);

-- Create Configuration-Other Widget Line table
CREATE TABLE CNFG_OTHER_WIDGET_LINE (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,

    CONFIG_TYPE VARCHAR(16) NULL,
    DESCRIPTION VARCHAR(256) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CNFG_OTHER_WIDGET_LINE_PK PRIMARY KEY(ID),
    CONSTRAINT CNFG_OTHER_WIDGET_LINE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CNFG_OTHER_WIDGET_LINE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);
CREATE INDEX CNFG_OTHER_WIDGET_LINE_IDX ON CNFG_OTHER_WIDGET_LINE (
    ORGANISATION_ID, NAME
);

-- ----------------------------------------------------------
-- miracle Core database initialisation script.
-- ----------------------------------------------------------

-- Create Core-Other Record Description table
CREATE TABLE CORE_OTHER_ENTITY_RECORD (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,

    CONFIG_TYPE VARCHAR(16) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    ENTITY_TYPE VARCHAR(64) NULL,
    OPERATION_TYPE  VARCHAR(64) NULL,
    VIEW_DISPALY  BIT  NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_PK PRIMARY KEY(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_UNIQUE UNIQUE (ENTITY_TYPE)
);
CREATE INDEX CORE_OTHER_ENTITY_RECORD_IDX ON CORE_OTHER_ENTITY_RECORD (
    ORGANISATION_ID, NAME
);

-- Create Core-Other Record Field Description table
CREATE TABLE CORE_OTHER_ENTITY_RECORD_FIELD (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    LABEL VARCHAR(64) NULL,
    ORGANISATION_ID INT NULL,

    ALIAS VARCHAR(64) NULL,
    CONFIG_TYPE VARCHAR(16) NULL,
    ENTITY_TYPE VARCHAR(64) NULL,
    ENUM_TYPE VARCHAR(64) NULL,
    HELP_TEXT VARCHAR(1024) NULL,
    FIELD_ID INT  NULL,
    FIELD_TYPE VARCHAR(16) NULL,
    LENGTH INT NULL,
    LIST_FIELD_TYPE VARCHAR(16) NULL,
    MANDATORY BIT NOT NULL,
    MAP_VALUE_FIELD_TYPE VARCHAR(16) NULL,
    MAP_KEY_FIELD_TYPE VARCHAR(16) NULL,
    RECORD_ID INT NULL,
    REF_ENTITY_TYPE VARCHAR(64) NULL,
    REF_LIST_ENTITY_TYPE VARCHAR(64) NULL,
    REF_MAP_KEY_ENTITY_TYPE VARCHAR(64) NULL,
    REF_MAP_VALUE_ENTITY_TYPE VARCHAR(64) NULL,
    SEARCH_FIELD BIT NOT NULL,
    PRIMARY_KEY BIT NULL,
    REFERENCE_CODE VARCHAR(64) NULL,
    QUERY_CODE VARCHAR(1024) NULL,
    EDIT_ABLE BIT NULL,
    DISPLAY_TYPE  VARCHAR(64) NULL,
    REF_DISPLAY_TYPE  VARCHAR(64) NULL,
    DEFAULT_VALUE VARCHAR(1024) NULL,
    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    SOURCE_CODE VARCHAR(256) NULL,
    DIALOG_FORM_TYPE  VARCHAR(64) NULL,

    REG_EXPRESSION VARCHAR(128) NULL,
    REG_MESSAGE VARCHAR(64) NULL,
    LENGTH_RANGE_VALIDATOR BIT NULL,
    LENGTH_RANGE_MESSAGE VARCHAR(64) NULL,
    IS_INTEGER_VALIDATOR BIT NULL,
    IS_INTEGER_MESSAGE VARCHAR(64) NULL,
    IS_FLOAT_VALIDATOR BIT NULL,
    IS_FLOAT_MESSAGE VARCHAR(64) NULL,
    MAX_VALUE INT NULL,
    MIN_VALUE INT NULL,

    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_PK PRIMARY KEY(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_RECORD_FK FOREIGN KEY(RECORD_ID) REFERENCES CORE_OTHER_ENTITY_RECORD(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_UNIQUE UNIQUE (CODE, ENTITY_TYPE,DISPLAY_TYPE)
);
CREATE INDEX CORE_OTHER_ENTITY_RECORD_FIELD_IDX ON CORE_OTHER_ENTITY_RECORD_FIELD (
    ORGANISATION_ID, NAME
);

-- Create Core-Other Record Field Group table
CREATE TABLE CORE_OTHER_ENTITY_RECORD_FIELD_GROUP (
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(64) NULL,
    ORGANISATION_ID INT NULL,

    CONFIG_TYPE VARCHAR(16) NULL,
    DESCRIPTION VARCHAR(256) NULL,
    DISPLAY_ORDER INT NOT NULL,
    ENTITY_TYPE VARCHAR(64) NULL,
    GROUP_TYPE VARCHAR(32) NULL,
    RECORD_ID INT NULL,
    SHOW_DESCRIPTION BIT NULL,
    OPERATION_TYPE VARCHAR(64) NULL ,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_GROUP_PK PRIMARY KEY(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_GROUP_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_GROUP_RECORD_FK FOREIGN KEY(RECORD_ID) REFERENCES CORE_OTHER_ENTITY_RECORD(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_GROUP_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT CORE_OTHER_ENTITY_RECORD_FIELD_GROUP_UNIQUE UNIQUE (CODE, ENTITY_TYPE, OPERATION_TYPE)
);
CREATE INDEX CORE_OTHER_ENTITY_RECORD_FIELD_GROUP_IDX ON CORE_OTHER_ENTITY_RECORD_FIELD_GROUP (
    ORGANISATION_ID, NAME
);

-- Create Core Custom Field Record table
CREATE TABLE CORE_CUSTOM_FIELD_RECORD (
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,

    ENTITY_TYPE VARCHAR(64) NULL,
    FIELD_GSON_VALUE1 VARCHAR(1024) NULL,
    FIELD_GSON_VALUE2 VARCHAR(1024) NULL,
    FIELD_GSON_VALUE3 VARCHAR(1024) NULL,
    FIELD_GSON_VALUE4 VARCHAR(1024) NULL,
    FIELD_GSON_VALUE5 VARCHAR(1024) NULL,
    SCRIPT_ID VARCHAR(128) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CORE_CUSTOM_FIELD_RECORD_PK PRIMARY KEY(ID),
    CONSTRAINT CORE_CUSTOM_FIELD_RECORD_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CORE_CUSTOM_FIELD_RECORD_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);
CREATE INDEX CORE_CUSTOM_FIELD_RECORD_IDX ON CORE_CUSTOM_FIELD_RECORD (
    ORGANISATION_ID, OWNER_ID, CREATED_TIME
);

--Create table StatusGroup
CREATE TABLE CORE_STATUS_GROUP(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    CONFIG_TYPE VARCHAR(32) NULL,
    ENTITY_TYPE VARCHAR(64) NULL,
    DESCRIPTION VARCHAR(64) NULL,
    STATUS_GROUP VARCHAR(32) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT CORE_STATUS_GROUP_PK PRIMARY KEY (ID),
    CONSTRAINT CORE_STATUS_GROUP_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT CORE_STATUS_GROUP_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT CORE_STATUS_GROUP_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);
CREATE INDEX CORE_STATUS_GROUP_IDX ON CORE_STATUS_GROUP(
    ORGANISATION_ID, SUBSIDIARY_ID
);

-- ----------------------------------------------------------
-- miracle Business database initialisation script.
-- ----------------------------------------------------------
--Create Table Tran Contract
CREATE TABLE TRAN_CONTRACT(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    CONTRACT_TYPE VARCHAR(64) NULL,
    DESCRIPTION VARCHAR(1024) NULL,
    TRADING_TYPE VARCHAR(64) NULL,
    REPRESENTATIVE_ID INT NULL,
    SIGNER_ID INT NULL,
    VENDOR_ID INT NULL,
    CUSTOMER_ID INT NULL,
    SIGNER VARCHAR(64) NULL,
    PARENT_ID INT NULL,
    DOCUMENT_ID INT NULL,
    TOTAL_AMOUNT NUMERIC(18,6) NULL,
    EXECUTED_AMOUNT NUMERIC(18,6) NULL,
    BILLED_AMOUNT NUMERIC(18,6) NULL,
    MAX_ORDERS NUMERIC(18,6) NULL,
    AUTO_ORDER BIT NULL,
    INSTRUCTION_1 VARCHAR(1024) NULL,
    INSTRUCTION_2 VARCHAR(1024) NULL,
    INSTRUCTION_3 VARCHAR(1024) NULL,
    INSTRUCTION_4 VARCHAR(1024) NULL,
    INSTRUCTION_5 VARCHAR(1024) NULL,
    INSTRUCTION_6 VARCHAR(1024) NULL,
    PAYMENT_METHOD_ID INT NULL,
    START_DATE DATETIME NULL,
    EXPIRY_DATE DATETIME NULL,
    LOAN_PROVIDER_ID INT NULL,
    PAYER_TYPE VARCHAR(64) NULL,
    REFERENCE_CODE VARCHAR (32) NULL,
    STATUS_ID INT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT TRAN_CONTRACT_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_CONTRACT_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_CONTRACT_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_CONTRACT_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_CONTRACT_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_CONTRACT_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_CONTRACT_REPRESENTATIVE_FK FOREIGN KEY (REPRESENTATIVE_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_CONTRACT_SIGNER_FK FOREIGN KEY (SIGNER_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_CONTRACT_VENDOR_FK FOREIGN KEY (VENDOR_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_CONTRACT_CUSTOMER_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_CONTRACT_CONTACT_FK FOREIGN KEY (PARENT_ID) REFERENCES TRAN_CONTRACT (ID),
    CONSTRAINT TRAN_CONTRACT_PAYMENT_METHOD_FK FOREIGN KEY (PAYMENT_METHOD_ID) REFERENCES ACNT_PAYMENT_METHOD (ID),
    CONSTRAINT TRAN_CONTRACT_DOCUMENT_FK FOREIGN KEY (DOCUMENT_ID) REFERENCES DOCU_FILE (ID),
    CONSTRAINT TRAN_CONTRACT_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_CONTRACT_STATUS_FK FOREIGN KEY (STATUS_ID) REFERENCES CORE_STATUS(ID)
);
CREATE INDEX TRAN_CONTRACT_IDX ON TRAN_CONTRACT(
    ORGANISATION_ID, SUBSIDIARY_ID, VENDOR_ID, CUSTOMER_ID
);

-- Create Table Tran Order
CREATE TABLE TRAN_ORDER(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    CONTRACT_ID INT NULL,
    CURRENCY_ID INT NULL,
    CURRENCY_NAME VARCHAR(64) NULL,
    CUSTOMER_ID INT NULL,
    TRADING_TYPE VARCHAR(64) NULL,
    VENDOR_ID INT NULL,

    --Opportunity
    CLOSE_DATE DATETIME NULL,
    BILLING_ADDRESS_ID INT NULL,
    BUDGET_APPROVED BIT NULL,
    BUYING_REASON VARCHAR(256) NULL,
    ESTIMATED_BUDGET NUMERIC(18,6) NULL,
    ESTIMATED_GROSS_PROFIT NUMERIC(18,6) NULL,
    ESTIMATED_GROSS_PROFIT_PERCENT NUMERIC(18,6) NULL,
    EXCHANGE_RATE NUMERIC(18,6) NULL,
    FORECAST_TYPE VARCHAR(32) NULL,
    LEAD_SOURCE_ID INT NULL,
    MEMO VARCHAR(256) NULL,
    START_DATE DATETIME NULL,
    OPEN_DAYS INT NULL,
    STATUS_ID INT NULL,
    PARTNER_ID INT NULL,
    PROBABILITY NUMERIC(18,6) NULL,
    PROSPECTIVE_TIME DATETIME NULL,
    RESIDENTIAL_SHIP BIT NULL,
    SALES_RANGE_HIGH NUMERIC(18,6) NULL,
    SALES_RANGE_LOW NUMERIC(18,6) NULL,
    SHIPPING_ADDRESS_ID INT NULL,
    SHIPPING_ADDRESS VARCHAR(128) NULL,
    TAX_REGISTRATION_TYPE VARCHAR(32) NULL,
    TAX_REGISTRATION_NUMBER VARCHAR(16) NULL,
    TRANSACTION_DATE DATETIME NULL,
    TRANSACTION_ID VARCHAR(16) NULL,
    WIN_LOSS_REASON_ID INT NULL,
    EXPIRY_DATE DATETIME NULL,
    --PurchaseOrder
--     STATUS_ID INT NULL, purchaseOrderStatus
    NEXT_APPROVER_ID INT NULL,
    MAX_ITEMS INT NULL,
    AVAILABLE_QUANTITY NUMERIC(18,6) NULL,
    BILLED_QUANTITY NUMERIC(18,6) NULL,
    REFERENCE_CODE VARCHAR(32) NULL,
    ESTIMATED_PAYMENT_DATE DATETIME NULL,
    ESTIMATED_ARRIVAL_DATE DATETIME NULL,
    DESCRIPTION VARCHAR(1024) NULL,
    AWARD_DATE DATETIME NULL,
    PAYER_TYPE VARCHAR(64) NULL,
    PAYMENT_METHOD VARCHAR(64) NULL,
    --SalesOrder
    AUTHORISE_CODE VARCHAR(32) NULL,
    BALANCE NUMERIC(18,6) NULL,
	SUPERVISOR_APPROVAL BIT NULL,
--     BILLING_ADDRESS_ID INT NULL,
    BILLING_SCHEDULE_ID INT NULL,
    CREDIT_CARD_ID INT NULL,
    CREDIT_CARD_APPROVED BIT NULL,
    CREDIT_CARD_EXPIRY_DATE DATETIME NULL,
    CREDIT_CARD_NAME VARCHAR(16) NULL,
    CREDIT_CARD_NUMBER VARCHAR(32) NULL,
    CREDIT_CARD_POSTCODE VARCHAR(32) NULL,
    CREDIT_CARD_SECURITY_CODE VARCHAR(32) NULL,
    CREDIT_CARD_STREET VARCHAR(32) NULL,
    DEFERRED_REVENUE NUMERIC(18,6) NULL,
    DEFERRED_REVENUE_ACCOUNT_ID INT NULL,
    DISCOUNT_ITEM_ID INT NULL,
    DISCOUNT_RATE NUMERIC NULL,
    DISCOUNT_TOTAL NUMERIC NULL,
    EMAIL VARCHAR(128) NULL,
    END_DATE DATETIME NULL,
--     ESTIMATED_GROSS_PROFIT NUMERIC NULL,
--     ESTIMATED_GROSS_PROFIT_PERCENT NUMERIC NULL,
    ESTIMATED_TOTAL_COST NUMERIC NULL,
--     EXCHANGE_RATE NUMERIC NULL,
    EXCHANGE_REVENUE_ACCOUNT_ID INT NULL,
    FAX VARCHAR(128) NULL,
    FOB VARCHAR(128) NULL,
    GIFT_CERTIFICATE_TOTAL NUMERIC NULL,
    HANDLING_COST NUMERIC NULL,
    HANDLING_TAX_CODE_ID INT NULL,
    HANDLING_TAX_RATE NUMERIC NULL,
    IGNORE_AVS BIT NULL,
    INCLUDE_COMMISSION BIT NULL,
    INSTALLMENT BIT NULL,
--     LEAD_SOURCE_ID INT NULL,
--     MEMO VARCHAR(256) NULL,
    MESSAGE VARCHAR(256) NULL,
    MULTIPLE_SHIPS BIT NULL,
    ON_REV_COMMITMENT BIT NULL,
    OPPORTUNITY_ID INT NULL,
--     PARTNER_ID INT NULL,
    PAYMENT_DATE DATETIME NULL,
    PAYMENT_HOLD_REASON VARCHAR(32) NULL,
    PAYMENT_RESULT VARCHAR(32) NULL,
    PAYMENT_TYPE VARCHAR(32) NULL,
    PAYMENT_UPDATED_BY VARCHAR(32) NULL,
    PAYPAL_AUTHORISATION_ID VARCHAR(32) NULL,
    PAYPAL_PROCESS BIT NULL,
    PAYPAL_STATUS VARCHAR(128) NULL,
    PAYPAL_TRANSACTION_ID VARCHAR(32) NULL,
    PROMOTION_CODE_ID INT NULL,
    RECOGNISED_REVENUE NUMERIC(18,6) NULL,
    REFERENCE_NUMBER VARCHAR(32) NULL,
    REQUIRE_AUTHORISATION BIT NULL,
--     RESIDENTIAL_SHIP BIT NULL,
    REVENUE_COMMIT_STATUS VARCHAR(32) NULL,
    REV_REC_SCHEDULE_ID INT NULL,
    REVENUE_STATUS VARCHAR(32) NULL,
    REV_REC_END_DATE DATETIME NULL,
    REV_REC_START_DATE DATETIME NULL,
    SALES_EFFECTIVE_DATE DATETIME NULL,
--     STATUS_ID INT NULL, salesOrderStatus
    SALES_PARTNER_ID INT NULL,
    REPRESENTATIVE_ID INT NULL,
    SALES_TEAM_ID INT NULL,
    SALES_TOTAL NUMERIC(18,6) NULL,
    SHIP_COMPLETED BIT NULL,
    SHIP_DATE DATETIME NULL,
--     SHIPPING_ADDRESS_ID INT NULL,
    SHIPPING_COST NUMERIC(18,6) NULL,
    SHIPPING_TAX_CODE_ID INT NULL,
    SHIPPING_TAX_RATE NUMERIC(18,6) NULL,
	SUBTOTAL NUMERIC(18,6) NULL,
	TOTAL NUMERIC(18,6) NULL,
--  START_DATE DATETIME NULL,
    TAXABLE BIT NULL,
    TAX_CODE_ID INT NULL,
    TAX_RATE NUMERIC(18,6) NULL,
--     TAX_REGISTRATION_TYPE VARCHAR(32) NULL,
--     TAX_REGISTRATION_NUMBER VARCHAR(32) NULL,
    TAX_TOTAL NUMERIC(18,6) NULL,
    TO_BE_EMAILED BIT NULL,
    TO_BE_FAXED BIT NULL,
    TO_BE_PRINTED BIT NULL,
    TRACKING_NUMBER VARCHAR(32) NULL,
    TOTAL_WEIGHT NUMERIC(18,6) NULL,
--     TRANSACTION_DATE DATETIME NULL,
--     TRANSACTION_ID VARCHAR(32) NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT TRAN_ORDER_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_ORDER_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_ORDER_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_ORDER_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_ORDER_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_ORDER_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_ORDER_CONTRACT_FK FOREIGN KEY (CONTRACT_ID) REFERENCES TRAN_CONTRACT (ID),
    CONSTRAINT TRAN_ORDER_CURRENCY_FK FOREIGN KEY (CURRENCY_ID) REFERENCES ACNT_CURRENCY (ID),
    CONSTRAINT TRAN_ORDER_CUSTOMER_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_ORDER_VENDOR_FK FOREIGN KEY (VENDOR_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_ORDER_BILLING_ADDRESS_FK FOREIGN KEY (BILLING_ADDRESS_ID) REFERENCES COMM_ADDRESS (ID),
    CONSTRAINT TRAN_ORDER_SHIPPING_ADDRESS_FK FOREIGN KEY (SHIPPING_ADDRESS_ID) REFERENCES COMM_ADDRESS (ID),
    CONSTRAINT TRAN_ORDER_LEAD_SOURCE_FK FOREIGN KEY (LEAD_SOURCE_ID) REFERENCES ACNT_LEAD_SOURCE (ID),
    CONSTRAINT TRAN_ORDER_STATUS_FK FOREIGN KEY (STATUS_ID) REFERENCES CORE_STATUS (ID),
    CONSTRAINT TRAN_ORDER_PARTNER_FK FOREIGN KEY(PARTNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_ORDER_NEXT_APPROVER_FK FOREIGN KEY(NEXT_APPROVER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_ORDER_WIN_LOSS_REASON_FK FOREIGN KEY(WIN_LOSS_REASON_ID) REFERENCES ACNT_WIN_LOSS_REASON(ID),
    CONSTRAINT TRAN_ORDER_BILLING_SCHEDULE_FK FOREIGN KEY(BILLING_SCHEDULE_ID) REFERENCES ACNT_BILLING_SCHEDULE(ID),
    CONSTRAINT TRAN_ORDER_CREDIT_CARD_FK FOREIGN KEY(CREDIT_CARD_ID) REFERENCES RLAT_OTHER_CREDIT_CARD(ID),
    CONSTRAINT TRAN_ORDER_DISCOUNT_ITEM_FK FOREIGN KEY(DISCOUNT_ITEM_ID) REFERENCES ACNT_ITEM(ID),
    CONSTRAINT TRAN_ORDER_EXCHANGE_REVENUE_ACCOUNT_FK FOREIGN KEY(EXCHANGE_REVENUE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT TRAN_ORDER_HANDLING_TAX_CODE_FK FOREIGN KEY(HANDLING_TAX_CODE_ID) REFERENCES ACNT_TAX_CODE(ID),
    CONSTRAINT TRAN_ORDER_OPPORTUNITY_FK FOREIGN KEY(OPPORTUNITY_ID) REFERENCES TRAN_ORDER(ID),
    CONSTRAINT TRAN_ORDER_PROMOTION_CODE_FK FOREIGN KEY(PROMOTION_CODE_ID) REFERENCES ACNT_PROMOTION_CODE(ID),
    CONSTRAINT TRAN_ORDER_REV_REC_SCHEDULE_FK FOREIGN KEY(REV_REC_SCHEDULE_ID) REFERENCES ACNT_REVENUE_RECOGNITION_SCHEDULE(ID),
    CONSTRAINT TRAN_ORDER_SALES_PARTNER_FK FOREIGN KEY(SALES_PARTNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_ORDER_REPRESENTATIVE_FK FOREIGN KEY(REPRESENTATIVE_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_ORDER_SALES_TEAM_FK FOREIGN KEY(SALES_TEAM_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT TRAN_ORDER_SHIPPING_TAX_CODE_FK FOREIGN KEY(SHIPPING_TAX_CODE_ID) REFERENCES ACNT_TAX_CODE(ID),
    CONSTRAINT TRAN_ORDER_TAX_CODE_FK FOREIGN KEY(TAX_CODE_ID) REFERENCES ACNT_TAX_CODE(ID),
    CONSTRAINT TRAN_ORDER_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);
CREATE INDEX TRAN_ORDER_IDX ON TRAN_ORDER(
    ORGANISATION_ID, SUBSIDIARY_ID, CUSTOMER_ID, VENDOR_ID, CONTRACT_ID
);

--Create OrderItem table
CREATE TABLE TRAN_OTHER_ORDER_ITEM(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    CUSTOMER_ID INT NULL,
    DESCRIPTION VARCHAR(128) NULL,
    STATUS_ID INT NULL,
    MEMO VARCHAR(256) NULL,
    RATE NUMERIC(18,6) NULL,
    ITEM_TYPE VARCHAR(32) NULL,
    INVENTORY_ITEM_ID INT NULL,
    AMOUNT_UNIT_ID INT NULL,
    VENDOR_ID INT NULL,
    SHIP_DATE DATE NULL,
    SHIPPING_ADDRESS_ID INT NULL,
    SHIP_QUANTITY NUMERIC(18,6) NULL,
    QUANTITY_UNIT_TYPE_ID INT NULL,

    --PurchaseOrderItem
    AMOUNT NUMERIC(18,6) NULL,
    INVOICED_AMOUNT NUMERIC(18,6) NULL,
    PAID_AMOUNT NUMERIC(18,6) NULL,
    BILLABLE BIT NULL,
    CLOSED BIT NULL,
    EXPECTED_DATE DATE NULL,
    GROSS_AMOUNT NUMERIC(18,6) NULL,
    INVENTORY_LOG_DETAIL_ID INT NULL,
    COST_CATEGORY_ID INT NULL,
    ORDER_ID INT NULL,
    QUANTITY NUMERIC(18,6) NULL,
    BILLED_QUANTITY NUMERIC(18,6) NULL,
    ON_HAND_QUANTITY NUMERIC(18,6) NULL,
    EXECUTED_TOTAL NUMERIC(18,6) NULL,
    INVOICED_QUANTITY NUMERIC(18,6) NULL,
    PAID_QUANTITY NUMERIC(18,6) NULL,
    PURCHASED_QUANTITY NUMERIC(18,6) NULL,
    SERIAL_NUMBER VARCHAR(32) NULL,
    TAX_CODE_ID INT NULL,
    TAX_RATE NUMERIC(18,6) NULL,
    TAX_TOTAL NUMERIC(18,6) NULL,
    DISCOUNT_AMOUNT NUMERIC(18,6) NULL,
    DISCOUNT NUMERIC(18,6) NULL,
    PAYER_TYPE VARCHAR(64) NULL,
    PAYMENT_METHOD VARCHAR(64) NULL,

    --SalesOrderItem
--     ORDER_ID INT NULL,
--     SERIAL_NUMBER VARCHAR(32) NULL,
--     AMOUNT NUMERIC(18,6) NULL,
--     GROSS_AMOUNT NUMERIC(18,6) NULL,
--     QUANTITY NUMERIC(18,6) NULL,
    AVAILABLE_QUANTITY NUMERIC(18,6) NULL,
--     INVOICED_QUANTITY NUMERIC(18,6) NULL,
--     ON_HAND_QUANTITY NUMERIC(18,6) NULL,
    DELIVERED_QUANTITY NUMERIC(18,6) NULL,
    SUPPLY_TYPE VARCHAR(32) NULL,
    TAX_AMOUNT NUMERIC(18,6) NULL,
--     TAX_RATE NUMERIC(18,6) NULL,
--     TAX_CODE_ID INT NULL,
--     EXPECTED_DATE DATE NULL,
--     BILLABLE BIT NULL,
--     CLOSED BIT NULL,

    --OpportunityItem
    SALES_AMOUNT NUMERIC(18,6) NULL,
    COST_ESTIMATE_TYPE VARCHAR(32) NULL,
    ESTIMATE BIT NULL,
    ESTIMATED_COST NUMERIC(18,6) NULL,
--     EXPECTED_DATE DATE NULL,
    FOR_A_JOB BIT NULL,
--     GROSS_AMOUNT NUMERIC(18,6) NULL,
    PRICE_LEVEL_ID INT NULL,
--     QUANTITY NUMERIC(18,6) NULL,
--     AVAILABLE_QUANTITY NUMERIC(18,6) NULL,
--     ON_HAND_QUANTITY NUMERIC(18,6) NULL,
    REV_REC_TERM INT NULL,
--     TAX_AMOUNT NUMERIC(18,6) NULL,
--     TAX_RATE NUMERIC(18,6) NULL,
--     TAX_CODE_ID INT NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_CUSTOMER_FK FOREIGN KEY(CUSTOMER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_VENDOR_FK FOREIGN KEY(VENDOR_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_INVENTORY_ITEM_FK FOREIGN KEY(INVENTORY_ITEM_ID) REFERENCES ACNT_ITEM(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_STATUS_FK FOREIGN KEY(STATUS_ID) REFERENCES CORE_STATUS(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_AMOUNT_UNIT_FK FOREIGN KEY(AMOUNT_UNIT_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_QUANTITY_UNIT_TYPE_FK FOREIGN KEY(QUANTITY_UNIT_TYPE_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_SHIPPING_ADDRESS_FK FOREIGN KEY(SHIPPING_ADDRESS_ID) REFERENCES COMM_ADDRESS(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_COST_CATEGORY_FK FOREIGN KEY(COST_CATEGORY_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_ORDER_FK FOREIGN KEY(ORDER_ID) REFERENCES TRAN_ORDER(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_TAX_CODE_FK FOREIGN KEY(TAX_CODE_ID) REFERENCES ACNT_TAX_CODE(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_PRICE_LEVEL_FK FOREIGN KEY(PRICE_LEVEL_ID) REFERENCES ACNT_PRICE_LEVEL(ID),
    CONSTRAINT TRAN_OTHER_ORDER_ITEM_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)

);
CREATE INDEX TRAN_OTHER_ORDER_ITEM_IDX ON TRAN_OTHER_ORDER_ITEM(
    ORGANISATION_ID, SUBSIDIARY_ID, CUSTOMER_ID, VENDOR_ID, ORDER_ID
);

--Create Table Tran Available Fund
CREATE TABLE TRAN_AVAILABLE_FUND(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    ACCOUNT_ID INT NULL,
    AVAILABLE_FUND_TYPE VARCHAR(16) NOT NULL,
    APPLIED_AMOUNT NUMERIC(18,6) NULL,
    CURRENCY_ID INT NULL,
    EXCHANGE_RATE NUMERIC(18,6) NULL,
    MEMO VARCHAR(1024) NULL,
    POSTING_PERIOD_ID INT NULL,
    SOURCE_ID INT NULL,
    STATUS_ID INT NULL,
    TOTAL_AMOUNT NUMERIC(18,6) NULL,
    TRANSACTION_NUMBER VARCHAR(32) NULL,
    TRANSACTION_TIME DATE NULL,
    USED_AMOUNT NUMERIC(18,6) NULL,

    --Customer Deposit
    AUTHORISED_CODE VARCHAR(64) NULL,
    DEBIT_CARD_NO VARCHAR(64) NULL,
    IS_RECURRING BIT NULL,
    PAID_AMOUNT NUMERIC(18,6) NULL,
    REFERENCE_NUMBER VARCHAR(64) NULL,
    SALES_ORDER_ID INT NULL,
    START_DATE DATE NULL,

    --Vendor Credit


    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_AVAILABLE_FUND_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_AVAILABLE_FUND_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_AVAILABLE_FUND_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_AVAILABLE_FUND_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT TRAN_AVAILABLE_FUND_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT TRAN_AVAILABLE_FUND_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT TRAN_AVAILABLE_FUND_ACCOUNT_FK FOREIGN KEY (ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT TRAN_AVAILABLE_FUND_CURRENCY_FK FOREIGN KEY (CURRENCY_ID) REFERENCES ACNT_CURRENCY(ID),
    CONSTRAINT TRAN_AVAILABLE_FUND_POSTING_PERIOD_FK FOREIGN KEY (POSTING_PERIOD_ID) REFERENCES ACNT_ACCOUNTING_PERIOD(ID),
    CONSTRAINT TRAN_AVAILABLE_FUND_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX TRAN_AVAILABLE_FUND_IDX ON TRAN_AVAILABLE_FUND(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, OWNER_ID, CREATED_TIME
);


--Create Table Tran Payment
CREATE TABLE TRAN_PAYMENT(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    PAYMENT_TYPE VARCHAR(64) NULL,

    --VendorPayment
    BANK_ACCOUNT_ID INT NULL,
    CURRENCY_ID INT NULL,
    PAYEE_ID INT NULL,
    MEMO VARCHAR(1024) NULL,
    ONLINE_BILL_PAY BIT NULL,
    PAYABLE_ACCOUNT_ID INT NULL,
    POSTING_PERIOD INT NULL,
    POSING_PERIOD_TYPE VARCHAR(64) NULL,
    PAYMENT_METHOD_ID INT NULL,
    STATUS_ID INT NULL,
    TO_BE_PRINTED BIT NULL,
    TOTAL NUMERIC(18,6) NULL,
    TRANSACTION_DATE DATE NULL,
    TRANSACTION_ID VARCHAR(32) NULL,
    TRANSACTION_NUMBER VARCHAR(32) NULL,
    VOID_JOURNAL_ACCOUNT_ID INT NULL,
    PURCHASE_ORDER_ITEM_ID INT NULL,
    SALES_ORDER_ITEM_ID INT NULL,

    --CustomerPayment
    APPLIED_AMOUNT NUMERIC(18,6) NULL,
    AUTHORISATION_CODE VARCHAR(64) NULL,
    AUTO_APPLY BIT NULL,
    CHARGE_CREDIT_CARD BIT NULL,
    CREDIT_CARD_ID INT NULL,
    CREDIT_CARD_APPROVED BIT NULL,
    CREDIT_CARD_EXPIRY_DATE DATETIME NULL,
    CREDIT_CARD_NAME VARCHAR(64) NULL,
    CREDIT_CARD_NUMBER VARCHAR(64) NULL,
    CREDIT_CARD_SECURITY_CODE VARCHAR(64) NULL,
    CREDIT_CARD_SECURITY_CODE_MATCH BIT NULL,
    CREDIT_CARD_STREET VARCHAR(64) NULL,
    CREDIT_CARD_POST_CODE VARCHAR(64) NULL,
    CURRENCY_NAME VARCHAR(64) NULL,
    CUSTOMER_ID INT NULL,
    CUSTOMER_NAME VARCHAR(64) NULL,
    DEBIT_CARD_ISSUED_NUMBER VARCHAR(64) NULL,
    EXCHANGE_RATE NUMERIC(18,6) NULL,
    RECURRING_PAYMENT BIT NULL,
    PAYMENT_AMOUNT NUMERIC(18,6) NULL,
    PENDING_AMOUNT NUMERIC(18,6) NULL,
    PURCHASE_REFERENCE_NUMBER VARCHAR(64) NULL,
    RECEIVABLE_ACCOUNT_ID INT NULL,
    START_DATE DATETIME NULL,
    UNAPPLIED_AMOUNT NUMERIC(18,6) NULL,
    RECEIPT_DATE DATE NULL,
    RECEIPT_total NUMERIC(18,6) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,
    CONSTRAINT TRAN_PAYMENT_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_PAYMENT_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_PAYMENT_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_PAYMENT_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_PAYMENT_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_PAYMENT_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_PAYMENT_BANK_ACCOUNT_FK FOREIGN KEY (BANK_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT (ID),
    CONSTRAINT TRAN_PAYMENT_PAYABLE_ACCOUNT_FK FOREIGN KEY (PAYABLE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT (ID),
    CONSTRAINT TRAN_PAYMENT_VOID_JOURNAL_ACCOUNT_FK FOREIGN KEY (VOID_JOURNAL_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT (ID),
    CONSTRAINT TRAN_PAYMENT_CURRENCY_FK FOREIGN KEY (CURRENCY_ID) REFERENCES ACNT_CURRENCY (ID),
    CONSTRAINT TRAN_PAYMENT_PAYEE_FK FOREIGN KEY (PAYEE_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_PAYMENT_PAYMENT_METHOD_FK FOREIGN KEY(PAYMENT_METHOD_ID) REFERENCES ACNT_PAYMENT_METHOD(ID),
    CONSTRAINT TRAN_PAYMENT_STATUS_FK FOREIGN KEY (STATUS_ID) REFERENCES CORE_STATUS (ID),
    CONSTRAINT TRAN_PAYMENT_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_PAYMENT_CREDIT_CARD_FK FOREIGN KEY(CREDIT_CARD_ID) REFERENCES RLAT_OTHER_CREDIT_CARD(ID),
    CONSTRAINT TRAN_PAYMENT_CUSTOMER_FK FOREIGN KEY(CUSTOMER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_PAYMENT_ACCOUNT_FK FOREIGN KEY(RECEIVABLE_ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT TRAN_PAYMENT_PURCHASE_ORDER_ITEM_FK FOREIGN KEY(PURCHASE_ORDER_ITEM_ID) REFERENCES TRAN_OTHER_ORDER_ITEM(ID),
    CONSTRAINT TRAN_PAYMENT_SALES_ORDER_ITEM_FK FOREIGN KEY(SALES_ORDER_ITEM_ID) REFERENCES TRAN_OTHER_ORDER_ITEM(ID)
);

CREATE INDEX TRAN_PAYMENT_IDX ON TRAN_PAYMENT(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID, STATUS_ID
);

--Create Table Invoice
CREATE TABLE TRAN_FINANCE_INVOICE(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    ACCOUNT_ID INT NULL,
    INVOICE_TYPE VARCHAR(32) NULL,

    --CustomerInvoice
    AMOUNT_PAID NUMERIC(18,6) NULL,
    AMOUNT_REMAINING NUMERIC(18,6) NULL,
    BILL_ADDRESS_ID INT NULL,
    BILL_ADDRESS_LINE VARCHAR(128) NULL,
    BILL_SCHEDULE_ID INT NULL,
    CURRENCY_ID INT NULL,
    DEFERRED_REVENUE NUMERIC(18,6) NULL,
    DISCOUNT_AMOUNT NUMERIC(18,6) NULL,
    DISCOUNT_DATE DATE NULL,
    DISCOUNT_TOTAL NUMERIC(18,6) NULL,
    EMAIL VARCHAR(256) NULL,
    END_DATE DATE NULL,
    CUSTOMER_ID INT NULL,
    ESTIMATED_GROSS_PROFIT NUMERIC(18,6) NULL,
    ESTIMATED_GROSS_PROFIT_PERCENT NUMERIC(18,6) NULL,
    EXCHANGE_RATE NUMERIC(18,6) NULL,
    EXCLUDE_COMMISSION BIT NULL,
    EXP_COST_DISCOUNT_AMOUNT NUMERIC(18,6) NULL,
    EXP_COST_DISCOUNT_ID INT NULL,
    EXP_COST_DISCOUNT_PRINT BIT NULL,
    EXP_COST_DISCOUNT_RATE NUMERIC(18,6) NULL,
    EXP_COST_DISCOUNT_TAX_AMOUNT NUMERIC(18,6) NULL,
    EXP_COST_DISCOUNT_TAXABLE BIT NULL,
    EXP_COST_TAX_CODE_ID INT NULL,
    EXP_COST_TAX_RATE NUMERIC(18,6) NULL,
    FAX VARCHAR(128) NULL,
    FOB VARCHAR(128) NULL,
    GIFT_CERTIFICATE_APPLIED BIT NULL,
    HANDLING_COST NUMERIC(18,6) NULL,
    HANDLING_TAX_RATE NUMERIC(18,6) NULL,
    HANDLING_TAX_CODE_ID INT NULL,
    ITEM_COST_DISCOUNT_AMOUNT NUMERIC(18,6) NULL,
    ITEM_COST_DISCOUNT_ID INT NULL,
    ITEM_COST_DISCOUNT_PRINT BIT NULL,
    ITEM_COST_DISCOUNT_RATE NUMERIC(18,6) NULL,
    ITEM_COST_DISCOUNT_TAX_AMOUNT NUMERIC(18,6) NULL,
    ITEM_COST_DISCOUNT_TAXABLE BIT NULL,
    ITEM_COST_TAX_CODE_ID INT NULL,
    ITEM_COST_TAX_RATE NUMERIC(18,6) NULL,
    LEAD_SOURCE_ID INT NULL,
    OPPORTUNITY_ID INT NULL,
    MESSAGE VARCHAR(128) NULL,
    ON_REV_COMMITMENT BIT NULL,
    PARTNER_ID INT NULL,
    POSTING_PERIOD INT NULL,
    POSTING_PERIOD_TYPE VARCHAR(32) NULL,
    PROMOTION_CODE_ID INT NULL,
    RECOGNISED_REVENUE NUMERIC(18,6) NULL,
    REFERENCE_NUMBER VARCHAR(32) NULL,
    REVENUE_STATUS VARCHAR(32) NULL,
    REV_REC_END_DATE DATE NULL,
    REV_REC_SCHEDULE_ID INT NULL,
    REV_REC_START_DATE DATE NULL,
    SALES_EFFECTIVE_DATE DATE NULL,
    SALES_TEAM_ID INT NULL,
    SALES_REPRESENTATIVE_ID INT NULL,
    SHIP_DATE DATE NULL,
    SHIPPING_ADDRESS_ID INT NULL,
    SHIPPING_ADDRESS VARCHAR(128) NULL,
    SHIPPING_COST NUMERIC(18,6) NULL,
    SHIPPING_TAX_CODE_ID INT NULL,
    SHIPPING_TAX_RATE NUMERIC(18,6) NULL,
    START_DATE DATE NULL,
    STATUS_ID INT NULL,
    SUBTOTAL NUMERIC(18,6) NULL,
    TAXABLE BIT NULL,
    TAX_CODE_ID INT NULL,
    TAX_RATE NUMERIC(18,6) NULL,
    TAX_TOTAL NUMERIC(18,6) NULL,
    TIME_COST_DISCOUNT_AMOUNT NUMERIC(18,6) NULL,
    TIME_COST_DISCOUNT_ID INT NULL,
    TIME_COST_DISCOUNT_PRINT BIT NULL,
    TIME_COST_DISCOUNT_RATE NUMERIC(18,6) NULL,
    TIME_COST_DISCOUNT_TAX_AMOUNT NUMERIC(18,6) NULL,
    TIME_COST_DISCOUNT_TAXABLE BIT NULL,
    TIME_COST_TAX_CODE_ID INT NULL,
    TIME_COST_TAX_RATE NUMERIC(18,6) NULL,
    TO_BE_EMAILED BIT NULL,
    TO_BE_FAXED BIT NULL,
    TO_BE_PRINTED BIT NULL,
    TOTAL NUMERIC(18,6) NULL,
    TOTAL_COST_ESTIMATE NUMERIC(18,6) NULL,
    TRACKING_NUMBER VARCHAR(32) NULL,
    TRANSACTION_DATE DATE NULL,
    TRANSACTION_ID VARCHAR(32) NULL,

     --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --VendorInvoice
--     AMOUNT_PAID NUMERIC(18,6) NULL,
--     AMOUNT_REMAINING NUMERIC(18,6) NULL,
--     CURRENCY_ID INT NULL,
--     DISCOUNT_AMOUNT NUMERIC(18,6) NULL,
--     DISCOUNT_DATE DATE NULL,
    DISCOUNT_ITEM_ID INT NULL,
    DISCOUNT_RATE NUMERIC(18,6) NULL,
--     DISCOUNT_TOTAL NUMERIC(18,6) NULL,
--     EMAIL VARCHAR(256) NULL,
--     EXCHANGE_RATE NUMERIC(18,6) NULL,
--     FAX VARCHAR(128) NULL,
--     FOB VARCHAR(128) NULL,
--     GIFT_CERTIFICATE_APPLIED BIT NULL,
--     HANDLING_COST NUMERIC(18,6) NULL,
--     HANDLING_TAX_RATE NUMERIC(18,6) NULL,
--     HANDLING_TAX_CODE_ID INT NULL,
--     MESSAGE VARCHAR(128) NULL,
--     PARTNER_ID INT NULL,
--     POSTING_PERIOD_TYPE VARCHAR(32) NULL,
--     PROMOTION_CODE_ID INT NULL,
--     REFERENCE_NUMBER VARCHAR(32) NULL,
--     SHIP_DATE DATE NULL,
--     SHIPPING_ADDRESS_ID INT NULL,
--     SHIPPING_ADDRESS VARCHAR(128) NULL,
--     SHIPPING_COST NUMERIC(18,6) NULL,
--     SHIPPING_TAX_CODE_ID INT NULL,
--     SHIPPING_TAX_RATE NUMERIC(18,6) NULL,
--     STATUS_ID INT NULL,
--     SUBTOTAL NUMERIC(18,6) NULL,
--     TAXABLE BIT NULL,
--     TAX_CODE_ID INT NULL,
--     TAX_RATE NUMERIC(18,6) NULL,
--     TAX_TOTAL NUMERIC(18,6) NULL,
--     TO_BE_EMAILED BIT NULL,
--     TO_BE_FAXED BIT NULL,
--     TO_BE_PRINTED BIT NULL,
--     TOTAL NUMERIC(18,6) NULL,
--     TRACKING_NUMBER VARCHAR(32) NULL,
--     TRANSACTION_DATE DATE NULL,
--     TRANSACTION_ID VARCHAR(32) NULL,
    VENDOR_ID INT NULL,
    PURCHASE_ORDER_ITEM_ID INT NULL,
    SALES_ORDER_ITEM_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_FINANCE_INVOICE_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_ACCOUNT_FK FOREIGN KEY (ACCOUNT_ID) REFERENCES ACNT_ACCOUNT (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_BILL_ADDRESS_FK FOREIGN KEY (BILL_ADDRESS_ID) REFERENCES COMM_ADDRESS (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_SHIPPING_ADDRESS_FK FOREIGN KEY (SHIPPING_ADDRESS_ID) REFERENCES COMM_ADDRESS (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_BILL_SCHEDULE_FK FOREIGN KEY (BILL_SCHEDULE_ID) REFERENCES ACNT_BILLING_SCHEDULE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_CURRENCY_FK FOREIGN KEY (CURRENCY_ID) REFERENCES ACNT_CURRENCY (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_CUSTOMER_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_VENDOR_FK FOREIGN KEY (VENDOR_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_EXP_COST_DISCOUNT_FK FOREIGN KEY (EXP_COST_DISCOUNT_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_EXP_COST_TAX_CODE_FK FOREIGN KEY (EXP_COST_TAX_CODE_ID) REFERENCES ACNT_TAX_CODE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_HANDLING_TAX_CODE_FK FOREIGN KEY (HANDLING_TAX_CODE_ID) REFERENCES ACNT_TAX_CODE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_SHIPPING_TAX_CODE_FK FOREIGN KEY (SHIPPING_TAX_CODE_ID) REFERENCES ACNT_TAX_CODE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_TIME_COST_TAX_CODE_FK FOREIGN KEY (TIME_COST_TAX_CODE_ID) REFERENCES ACNT_TAX_CODE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_TAX_CODE_FK FOREIGN KEY (TAX_CODE_ID) REFERENCES ACNT_TAX_CODE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_ITEM_COST_DISCOUNT_FK FOREIGN KEY (ITEM_COST_DISCOUNT_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_TIME_COST_DISCOUNT_FK FOREIGN KEY (TIME_COST_DISCOUNT_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_DISCOUNT_ITEM_FK FOREIGN KEY (DISCOUNT_ITEM_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_ITEM_COST_TAX_CODE_FK FOREIGN KEY (ITEM_COST_TAX_CODE_ID) REFERENCES ACNT_TAX_CODE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_LEAD_SOURCE_FK FOREIGN KEY (LEAD_SOURCE_ID) REFERENCES ACNT_LEAD_SOURCE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_OPPORTUNITY_FK FOREIGN KEY (OPPORTUNITY_ID) REFERENCES TRAN_ORDER (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_PARTNER_FK FOREIGN KEY (PARTNER_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_PROMOTION_CODE_FK FOREIGN KEY (PROMOTION_CODE_ID) REFERENCES ACNT_PROMOTION_CODE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_REV_REC_SCHEDULE_FK FOREIGN KEY (REV_REC_SCHEDULE_ID) REFERENCES ACNT_REVENUE_RECOGNITION_SCHEDULE (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_SALES_TEAM_FK FOREIGN KEY (SALES_TEAM_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_SALES_REPRESENTATIVE_FK FOREIGN KEY (SALES_REPRESENTATIVE_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_STATUS_FK FOREIGN KEY (STATUS_ID) REFERENCES CORE_STATUS (ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_PURCHASE_ORDER_ITEM_FK FOREIGN KEY(PURCHASE_ORDER_ITEM_ID) REFERENCES TRAN_OTHER_ORDER_ITEM(ID),
    CONSTRAINT TRAN_FINANCE_INVOICE_SALES_ORDER_ITEM_FK FOREIGN KEY(SALES_ORDER_ITEM_ID) REFERENCES TRAN_OTHER_ORDER_ITEM(ID)
);
CREATE INDEX TRAN_FINANCE_INVOICE_IDX ON TRAN_FINANCE_INVOICE(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID, STATUS_ID, CUSTOMER_ID, VENDOR_ID
);

--Create Table Tran Cost
CREATE TABLE TRAN_COST(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    AMOUNT NUMERIC(18,6) NULL,
    APPLY BIT NULL,
    BILLED_DATE DATETIME NULL,
    COST_CATEGORY_ID INT NULL,
    COST_TYPE VARCHAR(64) NULL,
    GROSS_AMOUNT NUMERIC(18,6) NULL,
    MEMO VARCHAR(1024) NULL,
    ORIGINAL_AMOUNT NUMERIC(18,6) NULL,
    TAXABLE BIT NULL,
    TAX_AMOUNT NUMERIC(18,6) NULL,
    TAX_CODE_ID INT NULL,
    TAX_RATE NUMERIC(18,6) NULL,

    --InvoiceExpenseCost
    INVOICE_ID INT NULL,
    JOB VARCHAR(64) NULL,
    REV_REC_END_DATE DATETIME NULL,
    REV_REC_SCHEDULE_ID INT NULL,
    REV_REC_START_DATE DATETIME NULL,
    STAFF_ID INT NULL,

    --InvoiceItemCost
    COST_RATE NUMERIC(18,6) NULL,
--     INVOICE_ID INT NULL,
    ITEM_ID INT NULL,
    ITEM_COST_COUNT INT NULL,
--     JOB VARCHAR(64) NULL,
    QUANTITY NUMERIC(18,6) NULL,
--     REV_REC_END_DATE DATETIME NULL,
--     REV_REC_SCHEDULE_ID INT NULL,
--     REV_REC_START_DATE DATETIME NULL,
    SERIAL_NUMBER VARCHAR(32) NULL,
    UNIT_ID INT NULL,

    --InvoiceTimeCost
--     INVOICE_ID INT NULL,
--     ITEM_ID INT NULL,
--     JOB VARCHAR(64) NULL,
--     QUANTITY NUMERIC(18,6) NULL,
    RATE NUMERIC(18,6) NULL,
--     REV_REC_END_DATE DATETIME NULL,
--     REV_REC_SCHEDULE_ID INT NULL,
--     REV_REC_START_DATE DATETIME NULL,
--     STAFF_ID INT NULL,
--     UNIT_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_COST_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_COST_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_COST_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_COST_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_COST_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_COST_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_COST_CATEGORY_FK FOREIGN KEY (COST_CATEGORY_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_COST_TAX_CODE_FK FOREIGN KEY (TAX_CODE_ID) REFERENCES ACNT_TAX_CODE (ID),
    CONSTRAINT TRAN_COST_INVOICE_FK FOREIGN KEY (INVOICE_ID) REFERENCES TRAN_FINANCE_INVOICE (ID),
    CONSTRAINT TRAN_COST_REV_REC_SCHEDULE_FK FOREIGN KEY (REV_REC_SCHEDULE_ID) REFERENCES ACNT_REVENUE_RECOGNITION_SCHEDULE (ID),
    CONSTRAINT TRAN_COST_STAFF_FK FOREIGN KEY (STAFF_ID) REFERENCES RLAT_RELATION (ID),
    CONSTRAINT TRAN_COST_ITEM_FK FOREIGN KEY (ITEM_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT TRAN_COST_UNIT_FK FOREIGN KEY (UNIT_ID) REFERENCES ACNT_UNIT_TYPE (ID),
    CONSTRAINT TRAN_COST_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);
CREATE INDEX TRAN_COST_IDX ON TRAN_COST(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID, INVOICE_ID, STAFF_ID
);

--Create Table InventoryLogDetail
CREATE TABLE TRAN_INVENTORY_LOG_DETAIL(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    INVENTORY_ITEM_BIN_ID INT NULL,
    EXPIRATION_DATE DATE NULL,
    INVENTORY_ITEM_ID INT NULL,
    LOGGED_DATE DATE NULL,
    LOGGED_PRICE NUMERIC(18,6) NULL,
    LOGGED_QUANTITY NUMERIC(18,6) NULL,
    PURCHASE_ORDER_ID INT NULL,
    QUANTITY_AVAILABLE NUMERIC(18,6) NULL,
    QUANTITY_IN_TRANSIT NUMERIC(18,6) NULL,
    QUANTITY_ON_HAND NUMERIC(18,6) NULL,
    QUANTITY_ON_ORDER NUMERIC(18,6) NULL,
    RECEIPT_NUMBER VARCHAR(32) NULL,
    TO_BIN_ID INT NULL,
    PURCHASE_ORDER_ITEM_ID INT NULL,
    DELIVERY_QUANTITY NUMERIC(18,6) NULL,
    DELIVERY_DATE DATE NULL,
    INVENTORY_ITEM_CODE VARCHAR(64) NULL,
    INVENTORY_ITEM_QUANTITY NUMERIC(18,6) NULL,
    RATE NUMERIC(18,6) NULL,

     --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_INVENTORY_ITEM_BIN_FK FOREIGN KEY (INVENTORY_ITEM_BIN_ID) REFERENCES ACNT_INVENTORY_ITEM_BIN_NUMBER (ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_TO_BIN_FK FOREIGN KEY (TO_BIN_ID) REFERENCES ACNT_INVENTORY_ITEM_BIN_NUMBER (ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_INVENTORY_ITEM_FK FOREIGN KEY (INVENTORY_ITEM_ID) REFERENCES ACNT_ITEM (ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_PURCHASE_ORDER_FK FOREIGN KEY (PURCHASE_ORDER_ID) REFERENCES TRAN_ORDER (ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_INVENTORY_LOG_DETAIL_PURCHASE_ORDER_ITEM_FK FOREIGN KEY (PURCHASE_ORDER_ITEM_ID) REFERENCES TRAN_OTHER_ORDER_ITEM(ID)
);

CREATE INDEX TRAN_INVENTORY_LOG_DETAIL_IDX ON TRAN_INVENTORY_LOG_DETAIL(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID, PURCHASE_ORDER_ID, PURCHASE_ORDER_ITEM_ID
);

--Create Table Expense
CREATE TABLE TRAN_EXPENSE(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Common Properites
    ACCOUNT_ID INT NULL,
    AMOUNT NUMERIC(18,6) NULL,
    EXPENSE_TYPE VARCHAR(32) NULL,
    EXPENSE_CATEGORY_ID INT NULL,
    GROSS_AMOUNT NUMERIC(18,6) NULL,
    BILLABLE BIT NOT NULL,
    MEMO VARCHAR(1024) NULL,
    TAX_AMOUNT NUMERIC(18,6) NULL,
    TAX_CODE_ID INT NULL,
    SPECIAL_TAX_RATE NUMERIC(18,6) NULL,
    SECOND_SPECIAL_TAX_RATE NUMERIC(18,6) NULL,

    --PurchaseOrderExpense
    CLOSED BIT NOT NULL,
    PURCHASE_ORDER_ID INT NULL,

    --VendorCreditExpense
    AMORTIZATION_END_DATE DATETIME NULL,
    AMORTIZATION_SCHEDULE_ID INT NULL,
    AMORTIZATION_START_DATE DATETIME NULL,

    --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_EXPENSE_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_EXPENSE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_EXPENSE_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_EXPENSE_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_EXPENSE_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_EXPENSE_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_EXPENSE_INVENTORY_ITEM_BIN_FK FOREIGN KEY (ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID),
    CONSTRAINT TRAN_EXPENSE_CATEGORY_FK FOREIGN KEY (EXPENSE_CATEGORY_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT TRAN_EXPENSE_INVENTORY_ITEM_FK FOREIGN KEY (TAX_CODE_ID) REFERENCES ACNT_TAX_CODE(ID),
    CONSTRAINT TRAN_EXPENSE_PURCHASE_ORDER_FK FOREIGN KEY (PURCHASE_ORDER_ID) REFERENCES TRAN_ORDER (ID),
    CONSTRAINT TRAN_EXPENSE_AMORTIZATION_SCHEDULE_FK FOREIGN KEY (AMORTIZATION_SCHEDULE_ID) REFERENCES ACNT_BILLING_SCHEDULE(ID),
    CONSTRAINT TRAN_EXPENSE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID)
);

CREATE INDEX TRAN_EXPENSE_IDX ON TRAN_EXPENSE(
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, EXPENSE_TYPE, EXPENSE_CATEGORY_ID
);

--Create Table InventoryItemTransaction
CREATE TABLE TRAN_OTHER_INVENTORY_ITEM_TRANSACTION(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NULL,
    CODE VARCHAR(64) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    DELIVERY_DATE DATETIME NULL,
    MEMO VARCHAR(128) NULL,
    QUANTITY NUMERIC(18,6) NULL,
    SALES_ORDER_ID INT NULL,
    TRANSFER_ORDER_ID INT NULL,
    WORK_ORDER_ID INT NULL,
    INVENTORY_ITEM_CODE VARCHAR(64) NULL,
    INVENTORY_LOG_DETAIL_CODE VARCHAR(64) NULL,
    RATE NUMERIC(18,6) NULL,
    INVENTORY_ITEM_QUANTITY NUMERIC(18,6) NULL,
    INVENTORY_TRANSACTION_DATE DATETIME NULL,
    SUB_QUANTITY NUMERIC(18,6) NULL,
    SALES_ORDER_ITEM_ID INT NULL,

   --DataAccessPermission
    OWNER_PERMISSION INT NULL,
    GROUP_PERMISSION INT NULL,
    SUPERVISOR_PERMISSION INT NULL,
    OTHER_PERMISSION INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_PK PRIMARY KEY (ID),
    CONSTRAINT TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_DEPARTMENT_FK FOREIGN KEY (DEPARTMENT_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_CLASSIFICATION_FK FOREIGN KEY (CLASSIFICATION_ID) REFERENCES ACNT_GROUP (ID),
    CONSTRAINT TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_SALES_ORDER_ID_FK FOREIGN KEY (SALES_ORDER_ID) REFERENCES TRAN_ORDER (ID),
    CONSTRAINT TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_SALES_ORDER_ITEM_FK FOREIGN KEY(SALES_ORDER_ITEM_ID) REFERENCES TRAN_OTHER_ORDER_ITEM(ID)
);
CREATE INDEX TRAN_OTHER_INVENTORY_ITEM_TRANSACTION_IDX ON TRAN_OTHER_INVENTORY_ITEM_TRANSACTION (
    ORGANISATION_ID, SUBSIDIARY_ID, DEPARTMENT_ID, LOCATION_ID, SALES_ORDER_ID
);

--  Create Table Tran Other Contribution
CREATE TABLE TRAN_OTHER_CONTRIBUTION(
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    CONTRIBUTION NUMERIC(18,6) NULL,
    ROLE_ID INT NULL,
    SALES_ORDER_ID INT NULL,
    TYPE VARCHAR(32) NULL,
    IS_PRIMARY BIT NULL,

    --PartnerContribution
    INVOICE_ID INT NULL,
    OPPORTUNITY_ID INT NULL,
    PARTNER_ID INT NULL,

    --SalesTeamContribution
    SALES_STAFF_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_OTHER_CONTRIBUTION_PK PRIMARY KEY (ID)
);

--  Create Table Tran Other Purchase Order Expense
CREATE TABLE TRAN_OTHER_PURCHASE_ORDER_EXPENSE(
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    ACCOUNT_ID INT NULL,
    AMOUNT NUMERIC(18,6) NULL,
    BILLABLE BIT NULL,
    CLOSED BIT NULL,
    GROSS_AMOUNT NUMERIC(18,6) NULL,
    MEMO VARCHAR(1024) NULL,
    PURCHASE_ORDER_ID INT NULL,
    TAX_CODE_ID INT NULL,
    TAX_RATE NUMERIC(18,6) NULL,
    TAX_AMOUNT NUMERIC(18,6) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_OTHER_PURCHASE_ORDER_EXPENSE_PK PRIMARY KEY (ID)
);

--  Create Table Tran Other Sale Gift Certificate
CREATE TABLE TRAN_OTHER_SALE_GIFT_CERTIFICATE(
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    VERSION INT NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,

    EXPIRY_DATE DATETIME NULL,
    CERTIFICATE_CODE VARCHAR(32) NOT NULL,
    CERTIFICATE_MESSAGE VARCHAR(1024) NOT NULL,
    ORIGINAL_AMOUNT NUMERIC(18,6) NULL,
    REMAINING_AMOUNT NUMERIC(18,6) NULL,
    SENDER_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_OTHER_SALE_GIFT_CERTIFICATE_PK PRIMARY KEY (ID)
);

--  Create Table Tran Other Sale Gift Cert Redemption
CREATE TABLE TRAN_OTHER_SALE_GIFT_CERT_REDEMPTION(
    ID INT IDENTITY(1,1) NOT NULL,
    VERSION INT NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    APPLIED_AMOUNT NUMERIC(18,6) NULL,
    AVAILABLE_AMOUNT NUMERIC(18,6) NULL,
    GIFT_CERTIFICATE_ID INT NULL,
    INVOICE_ID INT NULL,
    REMAINING_AMOUNT NUMERIC(18,6) NULL,
    SALE_ORDER_ID INT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_OTHER_SALE_GIFT_CERT_REDEMPTION_PK PRIMARY KEY (ID)
);

--  Create Table Tran Other Opportunity Competitor
CREATE TABLE TRAN_OTHER_OPPORTUNITY_COMPETITOR(
    --TransactionEntityHead
    ID INT IDENTITY(1,1) NOT NULL,
    NAME VARCHAR(64) NOT NULL,
    CODE VARCHAR(32) NULL,
    VERSION INT NOT NULL,

    --ClassificationDetails
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DEPARTMENT_ID INT NULL,
    LOCATION_ID INT NULL,
    CLASSIFICATION_ID INT NULL,

    --Variable properties
    COMPETITOR_ID INT NULL,
    NOTE VARCHAR(128) NOT NULL,
    OPPORTUNIT_ID INT NULL,
    WINNER BIT NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_OTHER_OPPORTUNITY_COMPETITOR_PK PRIMARY KEY (ID)
);

--  Create Table Tran Other Sales Ship Transaction
CREATE TABLE TRAN_OTHER_SALES_SHIP_TRANSACTION(
    ID INT IDENTITY(1,1) NOT NULL,
    ORGANISATION_ID INT NULL,
    SUBSIDIARY_ID INT NULL,
    DESTINATION_ADDRESS_ID INT NULL,
    FULFILLED BIT NULL,
    HANDLING_RATE NUMERIC(18,6) NULL,
    HANDLING_TAX_RATE NUMERIC(18,6) NULL,
    HANDLING_TAX_AMOUNT NUMERIC(18,6) NULL,
    HANDLING_TAX_CODE_ID INT NULL,
    HANDLING_TAXABLE BIT NULL,
    SHIP_VIA_METHOD VARCHAR(64) NOT NULL,
    SHIPPING_RATE NUMERIC(18,6) NULL,
    SHIPPING_TAX_RATE NUMERIC(18,6) NULL,
    SHIPPING_TAX_AMOUNT NUMERIC(18,6) NULL,
    SHIPPING_TAX_CODE_ID INT NULL,
    SHIPPING_TAXABLE BIT NULL,
    SALES_ORDER_ID INT NULL,
    SHIP_FROM_ADDRESS VARCHAR(128) NOT NULL,
    SHIP_TO_ADDRESS VARCHAR(128) NOT NULL,
    SORUCE_ADDRESS_ID INT NULL,
    WEIGHT NUMERIC(18,6) NULL,

    --EntityCommonProperties
    OWNER_ID INT NULL,
    CREATED_TIME DATETIME NULL,
    LAST_MODIFIED_TIME DATETIME NULL,
    ACTIVE BIT NOT NULL,
    DELETED BIT NOT NULL,

    CONSTRAINT TRAN_OTHER_SALES_SHIP_TRANSACTION_PK PRIMARY KEY (ID)
);

-- ----------------------------------------------------------
-- miracle Add  all Many-To-Many mapping table.
-- ----------------------------------------------------------

--  Create employee role and employee mapping table
CREATE TABLE MAP_ROLE_AND_EMPLOYEES (
    ROLE_ID INT NOT NULL,
    EMPLOYEE_ID INT NOT NULL,
    CONSTRAINT MAP_ROLE_AND_EMPLOYEES_PK PRIMARY KEY(ROLE_ID, EMPLOYEE_ID),
    CONSTRAINT MAP_ROLE_AND_EMPLOYEES_ROLE_FK FOREIGN KEY(ROLE_ID) REFERENCES EMPE_ROLE(ID),
    CONSTRAINT MAP_ROLE_AND_EMPLOYEES_EMPLOYEE_FK FOREIGN KEY(EMPLOYEE_ID) REFERENCES RLAT_RELATION(ID)
);

-- Create employeeGroup and employee mapping table
CREATE TABLE MAP_EMPLOYEE_GROUP_AND_EMPLOYEES(
    EMPLOYEE_GROUP_ID INT NOT NULL,
    EMPLOYEE_ID INT NOT NULL,
    CONSTRAINT MAP_EMPLOYEE_GROUP_AND_EMPLOYEES_PK PRIMARY KEY (EMPLOYEE_GROUP_ID, EMPLOYEE_ID),
    CONSTRAINT MAP_EMPLOYEE_GROUP_AND_EMPLOYEES_GROUP_FK FOREIGN KEY (EMPLOYEE_GROUP_ID)REFERENCES ACNT_GROUP(ID),
    CONSTRAINT MAP_EMPLOYEE_GROUP_AND_EMPLOYEES_EMPLOYEE_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES RLAT_RELATION(ID)
);

--  Create employee role and menu item mapping table
CREATE TABLE MAP_PRODUCT_AND_MENU (
    PRODUCT_ID INT NOT NULL,
    MENU_ID INT NOT NULL,
    CONSTRAINT MAP_PRODUCT_AND_MENU_PK PRIMARY KEY(PRODUCT_ID, MENU_ID),
    CONSTRAINT MAP_PRODUCT_AND_MENU_PRODUCT_FK FOREIGN KEY(PRODUCT_ID) REFERENCES CNFG_PRODUCT(ID),
    CONSTRAINT MAP_PRODUCT_AND_MENU_MENU_FK FOREIGN KEY(MENU_ID) REFERENCES CNFG_MENU(ID)
);

--  Create organisation and product mapping table
CREATE TABLE MAP_ORGANISATION_AND_PRODUCTS (
    ORGANISATION_ID INT NULL,
    PRODUCT_ID INT NOT NULL,
    CONSTRAINT MAP_ORGANISATION_AND_PRODUCTS_PK PRIMARY KEY(ORGANISATION_ID, PRODUCT_ID),
    CONSTRAINT MAP_ORGANISATION_AND_PRODUCTS_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT MAP_ORGANISATION_AND_PRODUCTS_PRODUCT_FK FOREIGN KEY(PRODUCT_ID) REFERENCES CNFG_PRODUCT(ID)
);

--  Create organisation and menu mapping table
CREATE TABLE MAP_ORGANISATION_AND_MENUS (
    ORGANISATION_ID INT NULL,
    MENU_ID INT NOT NULL,
    CONSTRAINT MAP_ORGANISATION_AND_MENUS_PK PRIMARY KEY(ORGANISATION_ID, MENU_ID),
    CONSTRAINT MAP_ORGANISATION_AND_MENUS_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID),
    CONSTRAINT MAP_ORGANISATION_AND_MENUS_PRODUCT_FK FOREIGN KEY(MENU_ID) REFERENCES CNFG_MENU(ID)
);

-- Create promotionCode and inventoryItem mapping table
CREATE TABLE MAP_PROMOTION_CODE_AND_ITEMS(
     PROMOTION_CODE_ID INT NULL,
     ITEM_ID INT NOT NULL,
     CONSTRAINT MAP_PROMOTION_CODE_AND_ITEMS_PK PRIMARY KEY(PROMOTION_CODE_ID, ITEM_ID),
     CONSTRAINT MAP_PROMOTION_CODE_AND_ITEMS_PROMOTION_FK FOREIGN KEY (PROMOTION_CODE_ID) REFERENCES ACNT_PROMOTION_CODE(ID),
     CONSTRAINT MAP_PROMOTION_CODE_AND_ITEMS_INVENTORY_FK FOREIGN KEY (ITEM_ID) REFERENCES ACNT_ITEM(ID)
);
--  Create action adapter and main section mapping table
CREATE TABLE MAP_ACTION_ADAPTER_AND_SECTIONS (
    ACTION_ADAPTER_ID INT NOT NULL,
    FIELD_GROUP_ID INT NOT NULL,
    CONSTRAINT MAP_ACTION_ADAPTER_AND_SECTIONS_PK PRIMARY KEY(ACTION_ADAPTER_ID, FIELD_GROUP_ID),
    CONSTRAINT MAP_ACTION_ADAPTER_AND_ACTION_ADAPTER_ORGANISATION_FK FOREIGN KEY(ACTION_ADAPTER_ID) REFERENCES CNFG_ACTION_ADAPTER(ID),
    CONSTRAINT MAP_ACTION_ADAPTER_AND_SECTIONS_SECTION_FK FOREIGN KEY(FIELD_GROUP_ID) REFERENCES CORE_OTHER_ENTITY_RECORD_FIELD_GROUP(ID)
);

--  Create action adapter and main section mapping table
CREATE TABLE MAP_ACTION_ADAPTER_AND_FORM_GROUPS (
    ACTION_ADAPTER_ID INT NOT NULL,
    FORM_GROUP_ID INT NOT NULL,
    CONSTRAINT MAP_ACTION_ADAPTER_AND_FORM_GROUPS_PK PRIMARY KEY(ACTION_ADAPTER_ID, FORM_GROUP_ID),
    CONSTRAINT MAP_ACTION_ADAPTER_AND_FORM_GROUPS_ACTION_ADAPTER_FK FOREIGN KEY(ACTION_ADAPTER_ID) REFERENCES CNFG_ACTION_ADAPTER(ID),
    CONSTRAINT MAP_ACTION_ADAPTER_AND_FORM_GROUPS_GROUP_FK FOREIGN KEY(FORM_GROUP_ID) REFERENCES CNFG_OTHER_FORM_GROUP(ID)
);

--  Create action adapter and widget line mapping table
CREATE TABLE MAP_ACTION_ADAPTER_AND_WIDGET_LINES (
    ACTION_ADAPTER_ID INT NOT NULL,
    DISPLAY_ORDER INT NOT NULL,
    WIDGETLINES_KEY INT NOT NULL,
    CONSTRAINT MAP_ACTION_ADAPTER_AND_WIDGET_LINES_PK PRIMARY KEY(ACTION_ADAPTER_ID, DISPLAY_ORDER),
    CONSTRAINT MAP_ACTION_ADAPTER_AND_WIDGET_LINES_ACTION_ADAPTER_FK FOREIGN KEY(ACTION_ADAPTER_ID) REFERENCES CNFG_ACTION_ADAPTER(ID),
    CONSTRAINT MAP_ACTION_ADAPTER_AND_WIDGET_LINES_WIDGET_LINE_FK FOREIGN KEY(WIDGETLINES_KEY) REFERENCES CNFG_OTHER_WIDGET_LINE(ID)
);

--  Create field group and field mapping table
CREATE TABLE MAP_FIELD_GROUP_AND_FIELDS (
    FIELD_GROUP_ID INT NOT NULL,
    FIELDS_KEY INT NOT NULL,
    DISPLAY_ORDER INT NOT NULL,
    CONSTRAINT MAP_FIELD_GROUP_AND_FIELDS_PK PRIMARY KEY(FIELD_GROUP_ID, FIELDS_KEY),
    CONSTRAINT MAP_FIELD_GROUP_AND_FIELDS_FIELD_GROUP_FK FOREIGN KEY(FIELD_GROUP_ID) REFERENCES CORE_OTHER_ENTITY_RECORD_FIELD_GROUP(ID),
    CONSTRAINT MAP_FIELD_GROUP_AND_FIELDS_FIELD_FK FOREIGN KEY(FIELDS_KEY) REFERENCES CORE_OTHER_ENTITY_RECORD_FIELD(ID)
);

--  Create Location and Subsidiary mapping table
CREATE TABLE MAP_LOCATIONS_AND_SUBSIDIARIES(
    LOCATION_ID INT NOT NULL,
    SUBSIDIARY_ID INT NOT NULL,
    CONSTRAINT MAP_LOCATIONS_AND_SUBSIDIARIES_PK PRIMARY KEY (LOCATION_ID, SUBSIDIARY_ID),
    CONSTRAINT MAP_LOCATIONS_AND_SUBSIDIARIES_LOCATION_FK FOREIGN KEY (LOCATION_ID) REFERENCES ACNT_GROUP(ID),
    CONSTRAINT MAP_LOCATIONS_AND_SUBSIDIARIES_SUBSIDIARY_FK FOREIGN KEY (SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID)
);

--  Create widget line and widget mapping table
CREATE TABLE MAP_WIDGET_LINE_AND_WIDGETS (
    WIDGET_LINE_ID INT NOT NULL,
    DISPLAY_ORDER INT NOT NULL,
    WIDGETS_KEY INT NOT NULL,
    CONSTRAINT MAP_WIDGET_LINE_AND_WIDGETS_PK PRIMARY KEY(WIDGET_LINE_ID, DISPLAY_ORDER),
    CONSTRAINT MAP_WIDGET_LINE_AND_WIDGETS_WIDGET_LINE_FK FOREIGN KEY(WIDGET_LINE_ID) REFERENCES CNFG_OTHER_WIDGET_LINE(ID),
    CONSTRAINT MAP_WIDGET_LINE_AND_WIDGETS_WIDGET_FK FOREIGN KEY(WIDGETS_KEY) REFERENCES CNFG_OTHER_ACTION_WIDGET(ID)
);

-- Create UNIT_TYPE and MEASUREMENT field mapping table
CREATE TABLE MAP_UNIT_TYPE_AND_MEASUREMENT_UNITS(
    UNIT_TYPE_ID INT NOT NULL,
    MEASUREMENT_UNIT_ID INT NOT NULL,
    CONSTRAINT MAP_UNIT_TYPE_AND_MEASUREMENT_UNITS_PK PRIMARY KEY(UNIT_TYPE_ID, MEASUREMENT_UNIT_ID),
    CONSTRAINT MAP_UNIT_TYPE_AND_MEASUREMENT_UNITS_UNIT_TYPE_FK FOREIGN KEY (UNIT_TYPE_ID) REFERENCES ACNT_UNIT_TYPE(ID),
    CONSTRAINT MAP_UNIT_TYPE_AND_MEASUREMENT_UNITS_MEASUREMENT_FK FOREIGN KEY(MEASUREMENT_UNIT_ID) REFERENCES ACNT_OTHER_MEASUREMENT_UNIT(ID)
);

-- Create EMPLOYEE and SUBSIDIARY mapping table
CREATE TABLE MAP_EMPLOYEE_AND_SUBSIDIARY(
     EMPLOYEE_ID INT NOT NULL,
     SUBSIDIARY_ID INT NOT NULL,
     CONSTRAINT MAP_EMPLOYEE_AND_SUBSIDIARY_PK PRIMARY KEY (EMPLOYEE_ID,SUBSIDIARY_ID),
     CONSTRAINT MAP_EMPLOYEE_AND_SUBSIDIARY_EMPLOYEE_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES RLAT_RELATION(ID),
     CONSTRAINT MAP_EMPLOYEE_AND_SUBSIDIARY_SUBSIDIARY_FK FOREIGN KEY (SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID)
);

-- Create EMPLOYEE and CUSTOMER mapping table
CREATE TABLE MAP_EMPLOYEE_AND_CUSTOMERS(
    EMPLOYEE_ID INT NOT NULL,
    CUSTOMER_ID INT NOT NULL,
    CONSTRAINT MAP_EMPLOYEE_AND_CUSTOMERS_PK PRIMARY KEY(EMPLOYEE_ID,CUSTOMER_ID),
    CONSTRAINT MAP_EMPLOYEE_AND_CUSTOMERS_EMP_FK FOREIGN KEY (EMPLOYEE_ID) REFERENCES RLAT_RELATION(ID),
    CONSTRAINT MAP_EMPLOYEE_AND_CUSTOMERS_CUS_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES RLAT_RELATION(ID)
);
-- Create Subsidiary and customer mapping table
CREATE TABLE MAP_SUBSIDIARY_AND_CUSTOMERS(
    SUBSIDIARY_ID INT NOT NULL,
    CUSTOMER_ID INT NOT NULL,
    CONSTRAINT MAP_SUBSIDIARY_AND_CUSTOMERS_PK PRIMARY KEY (SUBSIDIARY_ID, CUSTOMER_ID),
    CONSTRAINT MAP_SUBSIDIARY_AND_CUSTOMERS_SUB_FK FOREIGN KEY (SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID),
    CONSTRAINT MAP_SUBSIDIARY_AND_CUSTOMERS_CUS_FK FOREIGN KEY (CUSTOMER_ID) REFERENCES RLAT_RELATION(ID)
);
--Create PaymentMethod and Account mapping table
CREATE TABLE MAP_PAYMENT_METHOD_AND_ACCOUNTS(
    PAYMENT_METHOD_ID INT NOT NULL,
    ACCOUNT_ID INT NOT NULL,
    CONSTRAINT MAP_PAYMENT_METHOD_AND_ACCOUNTS_PK PRIMARY KEY (PAYMENT_METHOD_ID, ACCOUNT_ID),
    CONSTRAINT MAP_PAYMENT_METHOD_AND_ACCOUNTS_PAY_FK FOREIGN KEY (PAYMENT_METHOD_ID) REFERENCES ACNT_PAYMENT_METHOD(ID),
    CONSTRAINT MAP_PAYMENT_METHOD_AND_ACCOUNTS_ACCOUNT_FK FOREIGN KEY (ACCOUNT_ID) REFERENCES ACNT_ACCOUNT(ID)
);
--Create DiscountItem and Subsudiary mapping table
CREATE TABLE MAP_DISCOUNT_ITEM_AND_SUBSIDIARY(
    DISCOUNTRY_ITEM_ID INT NOT NULL,
    SUBSIDIARY_ID INT NOT NULL,
    CONSTRAINT MAP_DISCOUNT_ITEM_AND_SUBSIDIARY_PK PRIMARY KEY (DISCOUNTRY_ITEM_ID,SUBSIDIARY_ID),
    CONSTRAINT MAP_DISCOUNT_ITEM_AND_SUBSIDIARY_ITEM_FK FOREIGN KEY (DISCOUNTRY_ITEM_ID) REFERENCES ACNT_ITEM(ID),
    CONSTRAINT MAP_DISCOUNT_ITEM_AND_SUBSIDIARY_SUB_FK FOREIGN KEY (SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID)
);
--Create Contract and InventoryItem
CREATE TABLE MAP_CONTRACT_AND_INVENTORY_ITEM(
    CONTRACT_ID INT NOT NULL,
    INVENTORY_ITEM_ID INT NOT NULL,
    CONSTRAINT MAP_CONTRACT_AND_INVENTORY_ITEM_PK PRIMARY KEY (CONTRACT_ID, INVENTORY_ITEM_ID),
    CONSTRAINT MAP_CONTRACT_AND_INVENTORY_ITEM_CON_FK FOREIGN KEY (CONTRACT_ID) REFERENCES TRAN_CONTRACT(ID),
    CONSTRAINT MAP_CONTRACT_AND_INVENTORY_ITEM_INV_FK FOREIGN KEY (INVENTORY_ITEM_ID) REFERENCES ACNT_ITEM(ID)
);

-- ----------------------------------------------------------
-- miracle Add all late binding foreign key constrains.
-- ----------------------------------------------------------

ALTER TABLE DOCU_FOLDER ADD CONSTRAINT DOCU_FOLDER_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID);
ALTER TABLE DOCU_FOLDER ADD CONSTRAINT DOCU_FOLDER_CLASSFICATION_FK FOREIGN KEY(CLASSIFICATION_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE DOCU_FOLDER ADD CONSTRAINT DOCU_FOLDER_DEPARTMENT_FK FOREIGN KEY(DEPARTMENT_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE DOCU_FOLDER ADD CONSTRAINT DOCU_FOLDER_LOCATION_FK FOREIGN KEY(LOCATION_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE DOCU_FOLDER ADD CONSTRAINT DOCU_FOLDER_GROUP_FK FOREIGN KEY(GROUP_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE DOCU_FOLDER ADD CONSTRAINT DOCU_FOLDER_PARENT_FK FOREIGN KEY(PARENT_ID) REFERENCES DOCU_FOLDER(ID);
ALTER TABLE DOCU_FOLDER ADD CONSTRAINT DOCU_FOLDER_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID);
ALTER TABLE DOCU_FOLDER ADD CONSTRAINT DOCU_FOLDER_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID);

ALTER TABLE DOCU_FILE ADD CONSTRAINT DOCU_FILE_ORGANISATION_FK FOREIGN KEY(ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID);
ALTER TABLE DOCU_FILE ADD CONSTRAINT DOCU_FILE_CLASSFICATION_FK FOREIGN KEY(CLASSIFICATION_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE DOCU_FILE ADD CONSTRAINT DOCU_FILE_DEPARTMENT_FK FOREIGN KEY(DEPARTMENT_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE DOCU_FILE ADD CONSTRAINT DOCU_FILE_LOCATION_FK FOREIGN KEY(LOCATION_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE DOCU_FILE ADD CONSTRAINT DOCU_FILE_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID);

ALTER TABLE DOC_OTHER_CSV_ENTITY_MAP ADD CONSTRAINT DOC_OTHER_CSV_ENTITY_MAP_ORG_FK FOREIGN KEY (ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID);
ALTER TABLE DOC_OTHER_CSV_ENTITY_MAP ADD CONSTRAINT DOC_OTHER_CSV_ENTITY_MAP_OWNER_FK FOREIGN KEY (OWNER_ID) REFERENCES RLAT_RELATION(ID);

ALTER TABLE DOC_OTHER_CSV_ENTITY_FIELD_MAP ADD CONSTRAINT DOC_OTHER_CSV_ENTITY_FIELD_MAP_ORG_FK FOREIGN KEY (ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID);
ALTER TABLE DOC_OTHER_CSV_ENTITY_FIELD_MAP ADD CONSTRAINT DOC_OTHER_CSV_ENTITY_FIELD_MAP_FIELD_FK FOREIGN KEY (ENTITY_RECORD_FIELD_ID) REFERENCES CORE_OTHER_ENTITY_RECORD_FIELD(ID);
ALTER TABLE DOC_OTHER_CSV_ENTITY_FIELD_MAP ADD CONSTRAINT DOC_OTHER_CSV_ENTITY_FIELD_MAP_OWNER_FK FOREIGN KEY (OWNER_ID) REFERENCES RLAT_RELATION(ID);

ALTER TABLE DOC_OTHER_CSV_IMPORTED_RECORD ADD CONSTRAINT DOC_OTHER_CSV_IMPORTED_RECORD_ORG_FK FOREIGN KEY (ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID);

ALTER TABLE COMM_ADDRESS ADD CONSTRAINT COMM_ADDRESS_ORG_FK FOREIGN KEY (ORGANISATION_ID) REFERENCES COMM_ORGANISATION(ID);
ALTER TABLE COMM_ADDRESS ADD CONSTRAINT COMM_ADDRESS_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID);
ALTER TABLE COMM_ADDRESS ADD CONSTRAINT COMM_ADDRESS_DEPARTMENT_FK FOREIGN KEY(DEPARTMENT_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE COMM_ADDRESS ADD CONSTRAINT COMM_ADDRESS_LOCATION_FK FOREIGN KEY(LOCATION_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE COMM_ADDRESS ADD CONSTRAINT COMM_ADDRESS_CLASSFICATION_FK FOREIGN KEY(CLASSIFICATION_ID) REFERENCES ACNT_GROUP(ID);
ALTER TABLE COMM_ADDRESS ADD CONSTRAINT COMM_ADDRESS_OWNER_FK FOREIGN KEY (OWNER_ID) REFERENCES RLAT_RELATION(ID);

ALTER TABLE COMM_ORGANISATION ADD CONSTRAINT COMM_ORGANISATION_REPRESENTATIVE_FK FOREIGN KEY(REPRESENTATIVE_ID) REFERENCES RLAT_RELATION(ID);
ALTER TABLE COMM_ORGANISATION ADD CONSTRAINT COMM_ORGANISATION_CONTACT_PERSON_FK FOREIGN KEY(CONTACT_PERSON_ID) REFERENCES RLAT_RELATION(ID);
ALTER TABLE COMM_ORGANISATION ADD CONSTRAINT COMM_ORGANISATION_DATA_NODE_FK FOREIGN KEY(DATA_NODE_ID) REFERENCES MANG_DATA_NODE(ID);
ALTER TABLE COMM_ORGANISATION ADD CONSTRAINT COMM_ORGANISATION_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID);

ALTER TABLE ACNT_GROUP ADD CONSTRAINT ACNT_GROUP_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID);
ALTER TABLE ACNT_GROUP ADD CONSTRAINT ACNT_GROUP_OWNER_FK FOREIGN KEY(OWNER_ID) REFERENCES RLAT_RELATION(ID);

ALTER TABLE RLAT_RELATION ADD CONSTRAINT RLAT_RELATION_SUBSIDIARY_FK FOREIGN KEY (SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY (ID);

ALTER TABLE RLAT_OTHER_RELATIONSHIP ADD CONSTRAINT RLAT_OTHER_RELATIONSHIP_SUBSIDIARY_FK FOREIGN KEY (SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY (ID);

ALTER TABLE RLAT_OTHER_CREDIT_CARD ADD CONSTRAINT RLAT_OTHER_CREDIT_CARD_SUBSIDIARY_FK FOREIGN KEY(SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY(ID);
ALTER TABLE RLAT_OTHER_CREDIT_CARD ADD CONSTRAINT RLAT_OTHER_CREDIT_CARD_CURRENCY_FK FOREIGN KEY(CURRENCY_ID) REFERENCES ACNT_CURRENCY(ID);

ALTER TABLE ACNT_UNIT_TYPE ADD CONSTRAINT ACNT_UNIT_TYPE_SUBSIDIARY_FK FOREIGN KEY (SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY (ID);

ALTER TABLE ACNT_UNIT_TYPE ADD CONSTRAINT ACNT_UNIT_TYPE_MEASUREMENT_UNIT_FK FOREIGN KEY (MEASUREMENT_UNIT_ID) REFERENCES ACNT_OTHER_MEASUREMENT_UNIT (ID);

ALTER TABLE ACNT_OTHER_MEASUREMENT_UNIT ADD CONSTRAINT ACNT_OTHER_MEASUREMENT_UNIT_SUBSIDIARY_FK FOREIGN KEY (SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY (ID);

ALTER TABLE ACNT_ACCOUNT ADD CONSTRAINT ACNT_ACCOUNT_SUBSIDIARY_FK FOREIGN KEY (SUBSIDIARY_ID) REFERENCES ACNT_SUBSIDIARY (ID);
ALTER TABLE ACNT_ACCOUNT ADD CONSTRAINT ACNT_ACCOUNT_CURRENCYFK FOREIGN KEY(CURRENCY_ID) REFERENCES ACNT_CURRENCY(ID);

ALTER TABLE ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE ADD CONSTRAINT ACNT_OTHER_REC_REV_SCHEDULE_RECURRENCE_SALES_ORDER_FK FOREIGN KEY(SALES_ORDER_ID) REFERENCES TRAN_ORDER(ID);
